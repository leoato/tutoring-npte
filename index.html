<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="ê³¼ì™¸ë…¸íŠ¸">
<meta name="theme-color" content="#1A2340">
<!-- â˜… ì•± ì•„ì´ì½˜: icon.png íŒŒì¼ì„ index.htmlê³¼ ê°™ì€ í´ë”(GitHub ë ˆí¬ ë£¨íŠ¸)ì— ì˜¬ë¦¬ë©´ ì ìš©ë©ë‹ˆë‹¤ -->
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" href="icon.png">
<title>ê³¼ì™¸ ê´€ë¦¬ ë…¸íŠ¸</title>
<link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&family=Noto+Sans+KR:wght@300;400;500;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ê³µí†µ ë³€ìˆ˜ & ë¦¬ì…‹
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --cream: #F5F0E8; --cream-dark: #EDE7D9; --navy: #1A2340; --navy-mid: #2C3E6B;
  --orange: #E8652A; --orange-light: #F28C5E; --sage: #5C7A6B; --warm-gray: #8A8278;
  --line: rgba(26,35,64,0.12); --shadow: 0 4px 24px rgba(26,35,64,0.10);
  --green: #2E7D52; --green-light: #E8F5EE; --red: #C0392B; --red-light: #FDECEA;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; -webkit-text-size-adjust: 100%; }
body {
  background: var(--cream); font-family: 'Noto Sans KR', sans-serif;
  color: var(--navy); display: flex; flex-direction: column;
  padding-bottom: env(safe-area-inset-bottom);
}
/* â”€â”€â”€ ë ˆì´ì•„ì›ƒ â”€â”€â”€ */
header {
  background: var(--navy); padding: 0 1.5rem;
  padding-top: env(safe-area-inset-top);
  display: flex; align-items: center; justify-content: space-between;
  height: calc(58px + env(safe-area-inset-top));
  flex-shrink: 0; box-shadow: 0 2px 16px rgba(26,35,64,0.25); z-index: 100;
}
.logo { font-family: 'Nanum Myeongjo', serif; font-weight: 800; font-size: 1.2rem; color: var(--cream); display: flex; align-items: center; gap: 10px; }
.logo-dot { width: 8px; height: 8px; background: var(--orange); border-radius: 50%; }
.header-meta { font-family: 'Space Mono', monospace; font-size: 0.65rem; color: rgba(245,240,232,0.4); letter-spacing: 1px; }
nav { background: var(--navy-mid); display: flex; overflow-x: auto; scrollbar-width: none; border-bottom: 2px solid rgba(232,101,42,0.3); flex-shrink: 0; }
nav::-webkit-scrollbar { display: none; }
.tab-btn { padding: 0.7rem 1.1rem; border: none; background: transparent; color: rgba(245,240,232,0.55); font-family: 'Noto Sans KR', sans-serif; font-size: 0.78rem; font-weight: 500; cursor: pointer; white-space: nowrap; transition: all 0.2s; border-bottom: 2px solid transparent; margin-bottom: -2px; -webkit-tap-highlight-color: transparent; }
.tab-btn:hover, .tab-btn:active { color: var(--cream); background: rgba(245,240,232,0.06); }
.tab-btn.active { color: var(--orange-light); border-bottom-color: var(--orange); background: rgba(232,101,42,0.08); font-weight: 700; }
.content-area { flex: 1; overflow: hidden; position: relative; }
.tab-panel { display: none; width: 100%; height: 100%; overflow-y: auto; -webkit-overflow-scrolling: touch; }
.tab-panel.active { display: block; animation: fadeUp 0.18s ease; }
@keyframes fadeUp { from { opacity:0; transform:translateY(6px); } to { opacity:1; transform:translateY(0); } }
.tab-content { padding: 1.5rem; background: var(--cream); background-image: repeating-linear-gradient(0deg,transparent,transparent 31px,rgba(26,35,64,0.04) 31px,rgba(26,35,64,0.04) 32px); min-height: 100%; }

/* â”€â”€â”€ ê³µí†µ ì»´í¬ë„ŒíŠ¸ â”€â”€â”€ */
.page-title { font-family: 'Nanum Myeongjo', serif; font-size: 1.6rem; font-weight: 700; margin-bottom: 0.2rem; }
.page-sub { font-size: 0.75rem; color: var(--warm-gray); font-family: 'Space Mono', monospace; letter-spacing: 0.5px; margin-bottom: 1.5rem; }
.card { background: white; border-radius: 12px; padding: 1.4rem; box-shadow: var(--shadow); border: 1px solid var(--line); margin-bottom: 1.2rem; }
.card-title { font-family: 'Nanum Myeongjo', serif; font-size: 1rem; font-weight: 700; color: var(--navy); margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1.5px solid var(--line); display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.card-title .icon { width: 24px; height: 24px; background: var(--orange); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; color: white; flex-shrink: 0; }
label { font-size: 0.7rem; font-weight: 700; color: var(--navy-mid); text-transform: uppercase; letter-spacing: 0.5px; font-family: 'Space Mono', monospace; display: block; margin-bottom: 5px; }
input, textarea, select { border: 1.5px solid var(--line); border-radius: 8px; padding: 0.6rem 0.85rem; font-family: 'Noto Sans KR', sans-serif; font-size: 0.87rem; color: var(--navy); background: var(--cream); transition: border-color 0.2s; outline: none; width: 100%; -webkit-appearance: none; }
input:focus, textarea:focus, select:focus { border-color: var(--orange); background: white; }
textarea { resize: vertical; line-height: 1.6; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem; }
.form-group { display: flex; flex-direction: column; gap: 5px; }
.form-group.full { grid-column: 1 / -1; }
.btn { padding: 0.6rem 1.2rem; border-radius: 8px; border: none; cursor: pointer; font-family: 'Noto Sans KR', sans-serif; font-weight: 700; font-size: 0.82rem; transition: all 0.2s; -webkit-tap-highlight-color: transparent; display: inline-flex; align-items: center; gap: 6px; }
.btn-primary { background: var(--orange); color: white; }
.btn-primary:hover { background: var(--orange-light); }
.btn-ghost { background: transparent; color: var(--navy-mid); border: 1.5px solid var(--line); }
.btn-ghost:hover { border-color: var(--orange); color: var(--orange); }
.btn-navy { background: var(--navy); color: white; }
.btn-navy:hover { background: var(--navy-mid); }
.btn-green { background: var(--green); color: white; }
.btn-green:hover { background: #3a9966; }
.btn-danger { background: transparent; color: var(--red); border: 1.5px solid rgba(192,57,43,0.2); padding: 0.35rem 0.7rem; font-size: 0.72rem; }
.btn-danger:hover { background: var(--red-light); }
.btn-sm { padding: 0.4rem 0.9rem; font-size: 0.75rem; }
.hint { font-size: 0.72rem; color: var(--warm-gray); margin-top: 4px; line-height: 1.5; }
.empty-state { text-align: center; padding: 2.5rem; color: var(--warm-gray); font-size: 0.82rem; }
.empty-icon { font-size: 2rem; margin-bottom: 0.5rem; }
.toast { position: fixed; bottom: calc(1.5rem + env(safe-area-inset-bottom)); right: 1.5rem; background: var(--navy); color: var(--cream); padding: 0.75rem 1.2rem; border-radius: 10px; font-size: 0.82rem; font-weight: 700; box-shadow: 0 4px 20px rgba(0,0,0,0.25); opacity: 0; transform: translateY(10px); transition: all 0.3s; pointer-events: none; z-index: 9999; max-width: calc(100vw - 3rem); }
.toast.show { opacity: 1; transform: translateY(0); }
.modal-bg { display: none; position: fixed; inset: 0; background: rgba(26,35,64,0.45); z-index: 500; align-items: center; justify-content: center; padding: 1rem; }
.modal-bg.open { display: flex; }
.modal { background: white; border-radius: 14px; padding: 1.5rem; width: 100%; max-width: 560px; max-height: 88vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.25); }
.modal-title { font-family: 'Nanum Myeongjo', serif; font-size: 1.1rem; font-weight: 700; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1.5px solid var(--line); }
.modal-actions { display: flex; gap: 8px; margin-top: 1rem; flex-wrap: wrap; }
.section-sep { height: 1px; background: var(--line); margin: 1.2rem 0; }

/* â”€â”€â”€ ëŒ€ì‹œë³´ë“œ â”€â”€â”€ */
.student-bar { background: var(--navy); border-radius: 12px; padding: 1.2rem 1.4rem; display: flex; align-items: center; gap: 1.3rem; margin-bottom: 1.4rem; flex-wrap: wrap; }
.student-avatar { width: 46px; height: 46px; background: var(--orange); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: 'Nanum Myeongjo', serif; font-size: 1.2rem; color: white; font-weight: 700; flex-shrink: 0; }
.student-name { font-family: 'Nanum Myeongjo', serif; font-size: 1.05rem; font-weight: 700; color: var(--cream); margin-bottom: 0.15rem; }
.student-meta { font-family: 'Space Mono', monospace; font-size: 0.63rem; color: rgba(245,240,232,0.45); }
.student-info { flex: 1; min-width: 100px; }
.student-stats { display: flex; gap: 1.3rem; flex-wrap: wrap; }
.stat { text-align: center; }
.stat-num { font-family: 'Space Mono', monospace; font-size: 1.3rem; font-weight: 700; color: var(--orange-light); line-height: 1; }
.stat-label { font-size: 0.63rem; color: rgba(245,240,232,0.4); margin-top: 2px; }
.dash-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.2rem; }
.dash-card { background: white; border-radius: 12px; padding: 1.2rem 1.3rem; box-shadow: var(--shadow); border: 1px solid var(--line); cursor: pointer; transition: all 0.2s; position: relative; overflow: hidden; -webkit-tap-highlight-color: transparent; }
.dash-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: var(--orange); opacity: 0; transition: opacity 0.2s; }
.dash-card:hover, .dash-card:active { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(26,35,64,0.14); }
.dash-card:hover::before, .dash-card:active::before { opacity: 1; }
.dc-num { font-family: 'Space Mono', monospace; font-size: 0.6rem; color: var(--orange); letter-spacing: 1.5px; text-transform: uppercase; margin-bottom: 0.35rem; }
.dc-title { font-family: 'Nanum Myeongjo', serif; font-size: 1rem; font-weight: 700; color: var(--navy); margin-bottom: 0.3rem; }
.dc-desc { font-size: 0.72rem; color: var(--warm-gray); line-height: 1.4; }
.dc-badge { position: absolute; top: 1rem; right: 1rem; background: var(--cream-dark); border-radius: 20px; padding: 0.15rem 0.55rem; font-family: 'Space Mono', monospace; font-size: 0.6rem; color: var(--navy-mid); }
.lesson-grid { display: flex; flex-wrap: wrap; gap: 7px; }
.lesson-box { width: 54px; height: 54px; border-radius: 8px; background: var(--cream-dark); border: 1.5px solid var(--line); display: flex; flex-direction: column; align-items: center; justify-content: center; font-family: 'Space Mono', monospace; cursor: pointer; transition: all 0.15s; -webkit-tap-highlight-color: transparent; }
.lesson-box:hover, .lesson-box:active { border-color: var(--orange); transform: scale(1.06); }
.lesson-box.done { background: var(--navy); border-color: var(--navy); }
.lesson-box.done .lb-num { color: var(--orange-light); }
.lesson-box.done .lb-date { color: rgba(245,240,232,0.4); }
.lb-num { font-size: 0.88rem; font-weight: 700; color: var(--navy); line-height: 1; }
.lb-date { font-size: 0.46rem; color: var(--warm-gray); margin-top: 3px; }
.dash-two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem; }
.recent-msg { font-size: 0.8rem; line-height: 1.65; color: var(--navy); background: var(--cream-dark); border-radius: 8px; padding: 0.75rem 1rem; border-left: 3px solid var(--orange); white-space: pre-line; word-break: break-word; }
.recent-msg-date { font-family: 'Space Mono', monospace; font-size: 0.62rem; color: var(--warm-gray); margin-bottom: 0.4rem; }
.weakness-tag { display: inline-flex; align-items: center; gap: 3px; background: var(--cream-dark); border: 1.5px solid var(--line); border-radius: 20px; padding: 0.3rem 0.75rem; font-size: 0.72rem; color: var(--navy); margin: 3px; }
.wt-leaf { color: var(--orange); font-weight: 700; }
.wt-sep { color: var(--warm-gray); font-size: 0.6rem; }

/* â•â•â• íƒ­1: í•™ìƒ ë¦¬ìŠ¤íŠ¸ & ìƒì„¸ â•â•â• */
/* ë·° ì „í™˜ */
.t1-view { display: none; }
.t1-view.active { display: block; animation: fadeUp 0.18s ease; }

/* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
.back-btn { display: inline-flex; align-items: center; gap: 6px; background: transparent; border: 1.5px solid var(--line); border-radius: 8px; padding: 0.45rem 1rem; font-size: 0.8rem; font-weight: 700; color: var(--navy-mid); cursor: pointer; margin-bottom: 1.2rem; -webkit-tap-highlight-color: transparent; transition: all 0.15s; }
.back-btn:hover { border-color: var(--orange); color: var(--orange); }

/* í•™ìƒ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ */
.student-card {
  background: white; border-radius: 12px; padding: 1.1rem 1.3rem;
  box-shadow: var(--shadow); border: 1.5px solid var(--line);
  margin-bottom: 0.9rem; cursor: pointer; transition: all 0.18s;
  display: flex; align-items: center; gap: 1rem;
  -webkit-tap-highlight-color: transparent; position: relative; overflow: hidden;
}
.student-card::before { content:''; position:absolute; top:0; left:0; bottom:0; width:3px; background:var(--orange); opacity:0; transition: opacity 0.15s; }
.student-card:hover, .student-card:active { transform: translateY(-2px); box-shadow: 0 6px 24px rgba(26,35,64,0.13); }
.student-card:hover::before, .student-card:active::before { opacity: 1; }
.sc-avatar { width: 44px; height: 44px; border-radius: 50%; background: var(--navy); display: flex; align-items: center; justify-content: center; font-family: 'Nanum Myeongjo', serif; font-size: 1.1rem; font-weight: 700; color: var(--orange-light); flex-shrink: 0; }
.sc-info { flex: 1; min-width: 0; }
.sc-name { font-family: 'Nanum Myeongjo', serif; font-size: 1rem; font-weight: 700; color: var(--navy); margin-bottom: 0.2rem; }
.sc-meta { font-family: 'Space Mono', monospace; font-size: 0.62rem; color: var(--warm-gray); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sc-arrow { color: var(--warm-gray); font-size: 0.9rem; flex-shrink: 0; }

/* ì¶”ê°€ ë²„íŠ¼ ì¹´ë“œ */
.add-student-btn {
  border: 2px dashed var(--line); border-radius: 12px; padding: 1.1rem;
  text-align: center; cursor: pointer; color: var(--warm-gray); font-size: 0.85rem;
  transition: all 0.18s; background: transparent; width: 100; -webkit-tap-highlight-color: transparent;
}
.add-student-btn:hover, .add-student-btn:active { border-color: var(--orange); color: var(--orange); background: rgba(232,101,42,0.03); }

/* ìƒì„¸ í—¤ë” */
.detail-header { background: var(--navy); border-radius: 12px; padding: 1.2rem 1.4rem; display: flex; align-items: center; gap: 1rem; margin-bottom: 1.2rem; }
.detail-avatar { width: 50px; height: 50px; border-radius: 50%; background: var(--orange); display: flex; align-items: center; justify-content: center; font-family: 'Nanum Myeongjo', serif; font-size: 1.3rem; font-weight: 700; color: white; flex-shrink: 0; }
.detail-name { font-family: 'Nanum Myeongjo', serif; font-size: 1.1rem; font-weight: 700; color: var(--cream); margin-bottom: 0.2rem; }
.detail-meta { font-family: 'Space Mono', monospace; font-size: 0.63rem; color: rgba(245,240,232,0.5); }

/* ìˆ˜ì—…ë£Œ ê³„ì‚°ê¸° */
.fee-calculator { background: var(--cream-dark); border-radius: 10px; padding: 1.2rem; border: 1.5px solid var(--line); }
.fee-inputs { display: flex; align-items: flex-end; gap: 10px; flex-wrap: wrap; margin-bottom: 1rem; }
.fee-input-group { display: flex; flex-direction: column; gap: 4px; }
.fee-input-group input { width: 110px; text-align: center; font-family: 'Space Mono', monospace; font-weight: 700; }
.fee-operator { font-family: 'Space Mono', monospace; font-size: 1.3rem; color: var(--orange); font-weight: 700; padding-bottom: 0.3rem; }
.fee-result { background: var(--navy); border-radius: 8px; padding: 0.85rem 1.2rem; display: flex; align-items: center; justify-content: space-between; }
.fee-result-label { font-size: 0.72rem; color: rgba(245,240,232,0.55); font-family: 'Space Mono', monospace; }
.fee-breakdown { font-family: 'Space Mono', monospace; font-size: 0.63rem; color: rgba(245,240,232,0.35); margin-top: 3px; }
.fee-result-num { font-family: 'Space Mono', monospace; font-size: 1.35rem; font-weight: 700; color: var(--orange-light); }
.unsaved-dot { width: 8px; height: 8px; background: var(--orange); border-radius: 50%; display: inline-block; margin-left: 6px; opacity: 0; transition: opacity 0.2s; vertical-align: middle; }
.unsaved-dot.visible { opacity: 1; }

/* â”€â”€â”€ íƒ­2 â”€â”€â”€ */
.folder-wrap { margin-bottom: 1rem; border-radius: 10px; overflow: hidden; border: 1.5px solid var(--line); }
.folder-header { display: flex; align-items: center; gap: 10px; padding: 0.85rem 1rem; background: var(--cream-dark); cursor: pointer; font-weight: 700; font-size: 0.87rem; color: var(--navy); transition: background 0.15s; user-select: none; -webkit-tap-highlight-color: transparent; }
.folder-header:hover { background: #e5dece; }
.folder-name-input { background: transparent; border: none; font-weight: 700; font-size: 0.87rem; color: var(--navy); font-family: 'Noto Sans KR', sans-serif; flex: 1; outline: none; cursor: pointer; padding: 0; }
.folder-count { font-family: 'Space Mono', monospace; font-size: 0.63rem; color: var(--warm-gray); margin-left: auto; white-space: nowrap; }
.folder-chevron { font-size: 0.7rem; color: var(--warm-gray); transition: transform 0.2s; flex-shrink: 0; }
.folder-chevron.open { transform: rotate(90deg); }
.folder-body { background: white; padding: 0.75rem 1rem; display: none; }
.folder-body.open { display: block; }
.file-item { display: flex; align-items: center; gap: 8px; padding: 0.55rem 0; border-bottom: 1px solid var(--line); font-size: 0.82rem; flex-wrap: wrap; }
.file-item:last-of-type { border-bottom: none; }
.file-icon { color: var(--orange); flex-shrink: 0; }
.file-name { font-weight: 500; word-break: break-all; flex: 1; min-width: 100px; }
.file-path { font-family: 'Space Mono', monospace; font-size: 0.6rem; color: var(--warm-gray); word-break: break-all; width: 100%; padding-left: 20px; }
.file-open-btn { background: var(--cream-dark); border: 1.5px solid var(--line); border-radius: 6px; padding: 0.25rem 0.6rem; font-size: 0.68rem; font-family: 'Space Mono', monospace; color: var(--navy-mid); cursor: pointer; white-space: nowrap; flex-shrink: 0; text-decoration: none; transition: all 0.15s; }
.file-open-btn:hover { border-color: var(--orange); color: var(--orange); }
.add-file-form { background: var(--cream-dark); border-radius: 8px; padding: 1rem; margin-top: 0.8rem; display: none; }
.add-file-form.open { display: block; }
.new-folder-form { background: var(--cream-dark); border-radius: 10px; padding: 1rem; margin-top: 0.5rem; display: none; }
.new-folder-form.open { display: block; }

/* â”€â”€â”€ íƒ­3 â”€â”€â”€ */
.extra-field-item { display: flex; gap: 8px; margin-bottom: 0.6rem; align-items: flex-start; }
.extra-field-item input:first-child { max-width: 130px; flex-shrink: 0; }
.extra-field-item textarea { flex: 1; min-height: 55px; }
.remove-field-btn { background: none; border: none; color: var(--warm-gray); cursor: pointer; font-size: 1rem; padding: 0.5rem; flex-shrink: 0; }
.remove-field-btn:hover { color: var(--red); }
.lesson-record { border: 1.5px solid var(--line); border-radius: 10px; padding: 1rem 1.2rem; margin-bottom: 0.8rem; background: white; transition: border-color 0.15s; }
.lesson-record:hover { border-color: rgba(232,101,42,0.3); }
.lesson-badge { font-family: 'Space Mono', monospace; font-size: 0.63rem; background: var(--navy); color: var(--orange-light); padding: 0.2rem 0.65rem; border-radius: 4px; white-space: nowrap; }
.lesson-date-label { font-size: 0.75rem; color: var(--warm-gray); }
.lesson-field { margin-bottom: 0.35rem; }
.lesson-field-label { font-family: 'Space Mono', monospace; font-size: 0.6rem; color: var(--warm-gray); text-transform: uppercase; }
.lesson-field-value { color: var(--navy); margin-top: 1px; font-size: 0.83rem; }
.hw-value { color: var(--sage); font-weight: 500; }
.msg-template-box { background: var(--cream-dark); border: 1.5px dashed var(--orange); border-radius: 10px; padding: 1.2rem; font-size: 0.85rem; line-height: 1.9; color: var(--navy); white-space: pre-wrap; word-break: break-word; margin-bottom: 1rem; min-height: 130px; }
.template-label { font-family: 'Space Mono', monospace; font-size: 0.6rem; color: var(--orange); letter-spacing: 1px; text-transform: uppercase; margin-bottom: 0.6rem; display: block; }

/* â”€â”€â”€ íƒ­4 â”€â”€â”€ */
.msg-item { display: flex; gap: 1rem; padding: 1rem 0; border-bottom: 1px solid var(--line); }
.msg-item:last-child { border-bottom: none; }
.msg-left { display: flex; flex-direction: column; align-items: center; min-width: 50px; padding-top: 2px; }
.msg-date-day { font-family: 'Space Mono', monospace; font-size: 0.62rem; color: var(--warm-gray); text-align: center; line-height: 1.4; }
.msg-date-num { font-family: 'Space Mono', monospace; font-size: 0.88rem; font-weight: 700; color: var(--navy-mid); text-align: center; }
.msg-bubble { flex: 1; background: var(--cream-dark); border-radius: 10px; padding: 0.85rem 1rem; border-left: 3px solid var(--orange); font-size: 0.83rem; line-height: 1.75; color: var(--navy); white-space: pre-line; word-break: break-word; }
.msg-bubble.editing { background: white; border: 1.5px solid var(--orange); padding: 0; }
.msg-bubble.editing textarea { background: transparent; border: none; padding: 0.85rem 1rem; border-radius: 8px; min-height: 110px; }
.search-bar { position: relative; margin-bottom: 1rem; }
.search-bar input { padding-left: 2.2rem; }
.search-icon { position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); font-size: 0.9rem; color: var(--warm-gray); pointer-events: none; }
.highlight { background: rgba(232,101,42,0.2); border-radius: 2px; }

/* â”€â”€â”€ íƒ­5 â”€â”€â”€ */
.path-display { display: flex; align-items: center; gap: 6px; background: var(--cream-dark); border-radius: 8px; padding: 0.6rem 1rem; margin-bottom: 0.8rem; flex-wrap: wrap; font-size: 0.82rem; }
.path-seg { color: var(--navy); }
.path-sep { color: var(--warm-gray); font-size: 0.7rem; }
.path-leaf { color: var(--orange); font-weight: 700; }
.photo-upload-area { border: 2px dashed var(--line); border-radius: 10px; padding: 1.3rem; text-align: center; cursor: pointer; transition: all 0.2s; background: var(--cream-dark); -webkit-tap-highlight-color: transparent; }
.photo-upload-area:hover, .photo-upload-area:active { border-color: var(--orange); background: rgba(232,101,42,0.04); }
.photo-upload-icon { font-size: 1.8rem; margin-bottom: 0.4rem; }
.photo-upload-text { font-size: 0.82rem; color: var(--warm-gray); }
.photo-upload-sub { font-size: 0.65rem; color: var(--warm-gray); margin-top: 0.3rem; font-family: 'Space Mono', monospace; }
.photo-preview-grid { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 0.8rem; }
.photo-thumb { width: 76px; height: 76px; border-radius: 8px; overflow: hidden; border: 1.5px solid var(--line); position: relative; flex-shrink: 0; cursor: pointer; }
.photo-thumb img { width: 100%; height: 100%; object-fit: cover; }
.photo-thumb .remove-btn { position: absolute; top: 2px; right: 2px; width: 20px; height: 20px; background: var(--orange); color: white; border-radius: 50%; font-size: 0.62rem; font-weight: 700; display: flex; align-items: center; justify-content: center; cursor: pointer; opacity: 0; transition: opacity 0.15s; border: none; }
.photo-thumb:hover .remove-btn { opacity: 1; }
.weakness-card { background: var(--cream-dark); border-radius: 10px; padding: 1rem 1.2rem; border: 1.5px solid var(--line); margin-bottom: 0.8rem; transition: border-color 0.15s; }
.weakness-card:hover { border-color: rgba(232,101,42,0.3); }
.wc-path { display: flex; align-items: center; gap: 5px; flex-wrap: wrap; margin-bottom: 0.6rem; }
.wc-seg { font-size: 0.78rem; color: var(--navy); }
.wc-sep { font-size: 0.63rem; color: var(--warm-gray); }
.wc-leaf { font-size: 0.82rem; color: var(--orange); font-weight: 700; }
.wc-date { font-family: 'Space Mono', monospace; font-size: 0.6rem; color: var(--warm-gray); margin-left: auto; }
.wc-memo { font-size: 0.8rem; color: var(--warm-gray); line-height: 1.55; margin-bottom: 0.7rem; }
.wc-photos { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 0.6rem; }
.wc-photo { width: 60px; height: 60px; border-radius: 7px; overflow: hidden; border: 1.5px solid var(--line); cursor: pointer; transition: transform 0.15s; }
.wc-photo:hover { transform: scale(1.05); }
.wc-photo img { width: 100%; height: 100%; object-fit: cover; }
.filter-row { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 1rem; }
.filter-chip { padding: 0.3rem 0.85rem; border-radius: 20px; border: 1.5px solid var(--line); font-size: 0.75rem; font-family: 'Noto Sans KR', sans-serif; cursor: pointer; background: var(--cream-dark); color: var(--navy); transition: all 0.15s; -webkit-tap-highlight-color: transparent; }
.filter-chip.active { background: var(--orange); color: white; border-color: var(--orange); font-weight: 700; }
.lightbox { display: none; position: fixed; inset: 0; background: rgba(26,35,64,0.9); z-index: 600; align-items: center; justify-content: center; }
.lightbox.open { display: flex; }
.lightbox img { max-width: 92vw; max-height: 85vh; border-radius: 10px; }
.lightbox-close { position: fixed; top: max(1.5rem, env(safe-area-inset-top)); right: 1.5rem; font-size: 1.8rem; color: white; cursor: pointer; }

/* â”€â”€â”€ íƒ­6 â”€â”€â”€ */
.config-status { display: flex; align-items: center; gap: 8px; padding: 0.7rem 1rem; border-radius: 8px; font-size: 0.8rem; font-weight: 700; margin-bottom: 1rem; }
.config-status.ok { background: var(--green-light); color: var(--green); border: 1.5px solid rgba(46,125,82,0.2); }
.config-status.empty { background: var(--cream-dark); color: var(--warm-gray); border: 1.5px solid var(--line); }
.sync-actions { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.8rem; margin-bottom: 1.2rem; }
.sync-btn-card { border: 1.5px solid var(--line); border-radius: 12px; padding: 1rem; text-align: center; cursor: pointer; transition: all 0.2s; background: white; display: flex; flex-direction: column; align-items: center; gap: 0.4rem; -webkit-tap-highlight-color: transparent; }
.sync-btn-card:hover:not(.disabled), .sync-btn-card:active:not(.disabled) { transform: translateY(-2px); box-shadow: var(--shadow); }
.sync-btn-card.disabled { opacity: 0.4; cursor: not-allowed; }
.sync-icon { font-size: 1.6rem; }
.sync-title { font-family: 'Nanum Myeongjo', serif; font-size: 0.88rem; font-weight: 700; color: var(--navy); }
.sync-desc { font-size: 0.67rem; color: var(--warm-gray); line-height: 1.4; }
.sync-btn-card.upload:hover:not(.disabled) { border-color: var(--navy); }
.sync-btn-card.download:hover:not(.disabled) { border-color: var(--green); }
.sync-btn-card.backup:hover:not(.disabled) { border-color: var(--orange); }
.log-box { background: var(--navy); border-radius: 10px; padding: 1rem 1.2rem; font-family: 'Space Mono', monospace; font-size: 0.72rem; color: rgba(245,240,232,0.7); min-height: 80px; max-height: 180px; overflow-y: auto; line-height: 1.8; }
.log-line { display: flex; gap: 10px; }
.log-time { color: rgba(245,240,232,0.35); flex-shrink: 0; }
.log-msg.ok { color: #6fcf97; }
.log-msg.err { color: #eb5757; }
.log-msg.info { color: var(--orange-light); }
.sync-status-bar { display: flex; align-items: center; justify-content: space-between; background: var(--cream-dark); border-radius: 10px; padding: 0.85rem 1.2rem; margin-bottom: 1.2rem; flex-wrap: wrap; gap: 0.5rem; }
.sync-last { font-family: 'Space Mono', monospace; font-size: 0.65rem; color: var(--warm-gray); }
.sync-badge { font-family: 'Space Mono', monospace; font-size: 0.63rem; padding: 0.2rem 0.7rem; border-radius: 20px; font-weight: 700; }
.sync-badge.synced { background: var(--green-light); color: var(--green); }
.sync-badge.never { background: var(--cream-dark); color: var(--warm-gray); border: 1px solid var(--line); }
.warning-box { background: #FFF8E1; border: 1.5px solid #F59E0B; border-radius: 10px; padding: 1rem 1.2rem; font-size: 0.8rem; line-height: 1.7; color: #78350F; margin-bottom: 1rem; }
.data-summary { display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.7rem; margin-bottom: 1rem; }
.data-item { background: var(--cream-dark); border-radius: 8px; padding: 0.7rem 0.5rem; text-align: center; }
.data-item-num { font-family: 'Space Mono', monospace; font-size: 1.1rem; font-weight: 700; color: var(--navy); }
.data-item-label { font-size: 0.6rem; color: var(--warm-gray); margin-top: 2px; font-family: 'Space Mono', monospace; }
.token-row { display: flex; gap: 8px; align-items: flex-end; }
.token-row input { flex: 1; font-family: 'Space Mono', monospace; letter-spacing: 1px; }
.step-badge { font-family: 'Space Mono', monospace; font-size: 0.68rem; background: var(--navy); color: var(--orange-light); padding: 0.15rem 0.5rem; border-radius: 4px; }
.spinner { display: inline-block; width: 14px; height: 14px; border: 2px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 0.7s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* â”€â”€â”€ ë°˜ì‘í˜• â”€â”€â”€ */
@media (max-width: 600px) {
  .tab-content { padding: 1rem; }
  .form-row { grid-template-columns: 1fr; }
  .dash-two-col { grid-template-columns: 1fr; }
  .fee-input-group input { width: 90px; }
  .data-summary { grid-template-columns: repeat(2, 1fr); }
  .sync-actions { grid-template-columns: 1fr; }
}
@media (min-width: 601px) and (max-width: 800px) {
  .sync-actions { grid-template-columns: 1fr 1fr; }
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â• HEADER â•â•â•â•â•â• -->
<header>
  <div class="logo"><span class="logo-dot"></span>ê³¼ì™¸ ê´€ë¦¬ ë…¸íŠ¸</div>
  <div class="header-meta" id="header-meta">TUTORING NOTE</div>
</header>

<!-- â•â•â•â•â•â• NAV â•â•â•â•â•â• -->
<nav>
  <button class="tab-btn active" data-tab="dashboard" onclick="showTab('dashboard')">ğŸ“‹ ëŒ€ì‹œë³´ë“œ</button>
  <button class="tab-btn" data-tab="tab1" onclick="showTab('tab1')">ğŸ‘¤ í•™ìƒ ì •ë³´</button>
  <button class="tab-btn" data-tab="tab2" onclick="showTab('tab2')">ğŸ“ ìë£Œ ëª¨ìŒì‹¤</button>
  <button class="tab-btn" data-tab="tab3" onclick="showTab('tab3')">ğŸ“– ìˆ˜ì—… ì§„ë„ ê¸°ë¡</button>
  <button class="tab-btn" data-tab="tab4" onclick="showTab('tab4')">ğŸ’¬ ì•ˆë‚´ ë¬¸ì ë³´ê´€ì†Œ</button>
  <button class="tab-btn" data-tab="tab5" onclick="showTab('tab5')">ğŸ¯ ì•½ì  ê¸°ë¡ì†Œ</button>
  <button class="tab-btn" data-tab="tab6" onclick="showTab('tab6')">ğŸ”„ ë™ê¸°í™”</button>
</nav>

<!-- â•â•â•â•â•â• CONTENT â•â•â•â•â•â• -->
<div class="content-area">

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ ëŒ€ì‹œë³´ë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="panel-dashboard" class="tab-panel active">
<div class="tab-content">
  <div class="page-title">ëŒ€ì‹œë³´ë“œ</div>
  <div class="page-sub">OVERVIEW â€” ëª¨ë“  ì •ë³´ë¥¼ í•œëˆˆì—</div>
  <div id="dash-student-bar"><!-- JSë¡œ ë Œë”ë§ --></div>
  <div class="dash-grid">
    <div class="dash-card" onclick="showTab('tab1')"><div class="dc-num">TAB 01</div><div class="dc-title">í•™ìƒ ê¸°ë³¸ ì •ë³´</div><div class="dc-desc">í•™ìƒ ë¦¬ìŠ¤íŠ¸, í”„ë¡œí•„, ìˆ˜ì—…ë£Œ ê³„ì‚°ê¸°</div><div class="dc-badge" id="dc-students">0ëª…</div></div>
    <div class="dash-card" onclick="showTab('tab2')"><div class="dc-num">TAB 02</div><div class="dc-title">ìë£Œ ëª¨ìŒì‹¤</div><div class="dc-desc">ê¸°ì¶œ, ëª¨ì˜ê³ ì‚¬, ì¶”ê°€ ìë£Œ</div><div class="dc-badge" id="dc-folders">0 í´ë”</div></div>
    <div class="dash-card" onclick="showTab('tab3')"><div class="dc-num">TAB 03</div><div class="dc-title">ìˆ˜ì—… ì§„ë„ ê¸°ë¡</div><div class="dc-desc">ë‚ ì§œ, íšŒì°¨, ì§„ë„, ìˆ™ì œ + ë¬¸ì ìƒì„±</div><div class="dc-badge" id="dc-lessons">0íšŒ</div></div>
    <div class="dash-card" onclick="showTab('tab4')"><div class="dc-num">TAB 04</div><div class="dc-title">ì•ˆë‚´ ë¬¸ì ë³´ê´€ì†Œ</div><div class="dc-desc">í•™ë¶€ëª¨ ë°œì†¡ ë¬¸ì ê¸°ë¡ ë° ê²€ìƒ‰</div><div class="dc-badge" id="dc-msgs">0ê±´</div></div>
    <div class="dash-card" onclick="showTab('tab5')"><div class="dc-num">TAB 05</div><div class="dc-title">ì•½ì  ê¸°ë¡ì†Œ</div><div class="dc-desc">ë‹¨ì›ë³„ ì·¨ì•½ ìœ í˜• + ì‚¬ì§„ ì²¨ë¶€</div><div class="dc-badge" id="dc-weakness">0ê±´</div></div>
    <div class="dash-card" onclick="showTab('tab6')"><div class="dc-num">TAB 06</div><div class="dc-title">ë™ê¸°í™” & ë°±ì—…</div><div class="dc-desc">GitHub Gist ë™ê¸°í™” + ë¡œì»¬ ë°±ì—…</div><div class="dc-badge" id="dc-sync">ë¯¸ë™ê¸°í™”</div></div>
  </div>
  <div class="card" style="margin-bottom:1rem">
    <div class="card-title"><span class="icon">ğŸ“–</span>ìˆ˜ì—… ì§„ë„ í•œëˆˆì— ë³´ê¸°</div>
    <div class="lesson-grid" id="dash-lesson-grid"><div style="font-size:0.78rem;color:var(--warm-gray)">íƒ­3ì—ì„œ ìˆ˜ì—…ì„ ê¸°ë¡í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div></div>
  </div>
  <div class="dash-two-col">
    <div class="card"><div class="card-title"><span class="icon">ğŸ’¬</span>ìµœê·¼ ì•ˆë‚´ ë¬¸ì</div><div id="dash-recent-msg"><div style="font-size:0.78rem;color:var(--warm-gray)">íƒ­4ì—ì„œ ë¬¸ìë¥¼ ê¸°ë¡í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div></div></div>
    <div class="card"><div class="card-title"><span class="icon">ğŸ¯</span>ìµœê·¼ ì•½ì </div><div id="dash-recent-weakness"><div style="font-size:0.78rem;color:var(--warm-gray)">íƒ­5ì—ì„œ ì•½ì ì„ ê¸°ë¡í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div></div></div>
  </div>
</div>
</div>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ íƒ­1: í•™ìƒ ì •ë³´ â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="panel-tab1" class="tab-panel">
<div class="tab-content">

  <!-- ë·°1: í•™ìƒ ë¦¬ìŠ¤íŠ¸ -->
  <div id="t1-list-view" class="t1-view active">
    <div class="page-title">í•™ìƒ ê¸°ë³¸ ì •ë³´</div>
    <div class="page-sub">TAB 01 â€” STUDENT LIST</div>
    <div id="t1-student-list"><!-- JS ë Œë”ë§ --></div>
    <div class="add-student-btn" onclick="t1OpenNew()">
      ï¼‹ ìƒˆ í•™ìƒ ì¶”ê°€
    </div>
  </div>

  <!-- ë·°2: í•™ìƒ ìƒì„¸ / í¸ì§‘ -->
  <div id="t1-detail-view" class="t1-view">
    <button class="back-btn" onclick="t1ShowList()">â† í•™ìƒ ëª©ë¡ìœ¼ë¡œ</button>
    <div id="t1-detail-header"><!-- JS ë Œë”ë§ --></div>

    <div class="card">
      <div class="card-title"><span class="icon">ğŸ‘¤</span>ê¸°ë³¸ í”„ë¡œí•„ <span class="unsaved-dot" id="t1-unsaved"></span></div>
      <div class="form-row">
        <div class="form-group"><label>í•™ìƒ ì´ë¦„</label><input type="text" id="t1-name" placeholder="ê¹€â—‹â—‹" oninput="t1Mark()"></div>
        <div class="form-group"><label>í•™ë…„</label>
          <select id="t1-grade" onchange="t1Mark()">
            <option value="">ì„ íƒ</option><option>ì¤‘1</option><option>ì¤‘2</option><option>ì¤‘3</option><option>ê³ 1</option><option>ê³ 2</option><option>ê³ 3</option>
          </select>
        </div>
        <div class="form-group"><label>í•™ìƒ ì—°ë½ì²˜</label><input type="text" id="t1-student_phone" placeholder="010-0000-0000" oninput="t1Mark()"></div>
        <div class="form-group"><label>í•™ë¶€ëª¨ ì—°ë½ì²˜</label><input type="text" id="t1-parent_phone" placeholder="010-0000-0000" oninput="t1Mark()"></div>
        <div class="form-group full"><label>í•™êµëª…</label><input type="text" id="t1-school" placeholder="â—‹â—‹ê³ ë“±í•™êµ" oninput="t1Mark()"></div>
      </div>
    </div>

    <div class="card">
      <div class="card-title"><span class="icon">ğŸ“…</span>ìˆ˜ì—… ì •ë³´</div>
      <div class="form-row">
        <div class="form-group"><label>ìˆ˜ì—… ìš”ì¼</label><input type="text" id="t1-day" placeholder="ë§¤ì£¼ ì›”ìš”ì¼" oninput="t1Mark()"></div>
        <div class="form-group"><label>ìˆ˜ì—… ì‹œê°„</label><input type="text" id="t1-time" placeholder="ì˜¤í›„ 7:00 ~ 9:00" oninput="t1Mark()"></div>
        <div class="form-group full"><label>ê³¼ëª©</label><input type="text" id="t1-subject" placeholder="ìˆ˜í•™ (ê³µí†µìˆ˜í•™1, 2)" oninput="t1Mark()"></div>
        <div class="form-group full">
          <label>ì´ë²ˆ ë‹¬ ìˆ˜ì—…ë£Œ ê³„ì‚°ê¸°</label>
          <div class="fee-calculator">
            <div class="fee-inputs">
              <div class="fee-input-group"><label>ì‹œê¸‰ (ì›)</label><input type="number" id="t1-hourly" placeholder="35000" oninput="t1CalcFee();t1Mark()"></div>
              <span class="fee-operator">Ã—</span>
              <div class="fee-input-group"><label>íšŒë‹¹ ì‹œê°„ (h)</label><input type="number" id="t1-hrs" placeholder="2" step="0.5" oninput="t1CalcFee();t1Mark()"></div>
              <span class="fee-operator">Ã—</span>
              <div class="fee-input-group"><label>ì´ë²ˆ ë‹¬ íšŸìˆ˜</label><input type="number" id="t1-sessions" placeholder="4" oninput="t1CalcFee();t1Mark()"></div>
            </div>
            <div class="fee-result">
              <div><div class="fee-result-label">ì´ë²ˆ ë‹¬ ìˆ˜ì—…ë£Œ</div><div class="fee-breakdown" id="t1-fee-breakdown">ì‹œê¸‰ Ã— ì‹œê°„ Ã— íšŸìˆ˜ ì…ë ¥ ì‹œ ìë™ê³„ì‚°</div></div>
              <div class="fee-result-num" id="t1-fee-total">â€”</div>
            </div>
          </div>
        </div>
        <div class="form-group full"><label>ë©”ëª¨</label><textarea id="t1-memo" placeholder="í•™ìƒì— ëŒ€í•œ íŠ¹ì´ì‚¬í•­, ëª©í‘œ, ì°¸ê³ ì‚¬í•­ ë“±..." oninput="t1Mark()"></textarea></div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn btn-primary" onclick="t1SaveCurrent()">ğŸ’¾ ì €ì¥</button>
        <button class="btn btn-danger" onclick="t1DeleteCurrent()">í•™ìƒ ì‚­ì œ</button>
      </div>
    </div>
  </div>

</div>
</div>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ íƒ­2: ìë£Œ ëª¨ìŒì‹¤ â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="panel-tab2" class="tab-panel">
<div class="tab-content">
  <div class="page-title">ìë£Œ ëª¨ìŒì‹¤</div>
  <div class="page-sub">TAB 02 â€” STUDY MATERIALS</div>
  <div class="card">
    <div class="card-title"><span class="icon">ğŸ“</span>í´ë” & íŒŒì¼ ê´€ë¦¬</div>
    <div id="t2-folder-list"></div>
    <div class="new-folder-form" id="t2-new-folder-form">
      <label>ìƒˆ í´ë” ì´ë¦„</label>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:0.5rem">
        <select id="t2-new-emoji" style="width:72px;flex-shrink:0"><option>ğŸ“</option><option>ğŸ«</option><option>ğŸ“</option><option>â•</option><option>ğŸ“š</option><option>ğŸ—‚</option><option>â­</option></select>
        <input type="text" id="t2-new-name" placeholder="í´ë” ì´ë¦„" style="flex:1">
        <button class="btn btn-primary btn-sm" onclick="t2AddFolder()">ì¶”ê°€</button>
        <button class="btn btn-ghost btn-sm" onclick="t2ToggleNewFolder()">ì·¨ì†Œ</button>
      </div>
    </div>
    <div style="margin-top:0.8rem"><button class="btn btn-ghost" onclick="t2ToggleNewFolder()">ğŸ“ í´ë” ì¶”ê°€</button></div>
  </div>
</div>
</div>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ íƒ­3: ìˆ˜ì—… ì§„ë„ â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="panel-tab3" class="tab-panel">
<div class="tab-content">
  <div class="page-title">ìˆ˜ì—… ì§„ë„ ê¸°ë¡</div>
  <div class="page-sub">TAB 03 â€” LESSON LOG + MESSAGE GENERATOR</div>
  <div class="card">
    <div class="card-title"><span class="icon">ğŸ—‚</span>ìˆ˜ì—… í•œëˆˆì— ë³´ê¸°</div>
    <div class="lesson-grid" id="t3-grid"><div style="font-size:0.78rem;color:var(--warm-gray)">ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</div></div>
  </div>
  <div class="card">
    <div class="card-title"><span class="icon">âœï¸</span>ìƒˆ ìˆ˜ì—… ê¸°ë¡ <span id="t3-next-badge" style="font-family:'Space Mono',monospace;font-size:0.7rem;background:var(--orange);color:white;padding:0.15rem 0.6rem;border-radius:4px;margin-left:4px"></span></div>
    <div class="form-row">
      <div class="form-group"><label>ë‚ ì§œ</label><input type="date" id="t3-date"></div>
      <div class="form-group"><label>íšŒì°¨ (ìë™/ìˆ˜ì • ê°€ëŠ¥)</label><input type="number" id="t3-num" min="1"></div>
      <div class="form-group full"><label>ì§„ë„ ë‚´ìš©</label><textarea id="t3-content" placeholder="ì˜ˆ: ê³µí†µìˆ˜í•™1 - ì¸ìˆ˜ë¶„í•´ (p.45~52)" style="min-height:65px"></textarea></div>
      <div class="form-group full"><label>ìˆ™ì œ ë²”ìœ„</label><textarea id="t3-hw" placeholder="ì˜ˆ: êµì¬ p.53 ~ p.60" style="min-height:50px"></textarea></div>
    </div>
    <div id="t3-extra-fields"></div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:0.3rem">
      <button class="btn btn-primary" onclick="t3Save()">ğŸ’¾ ì €ì¥ + ë¬¸ì ìƒì„±</button>
      <button class="btn btn-ghost" onclick="t3AddExtra()">+ í•­ëª© ì¶”ê°€</button>
    </div>
  </div>
  <div class="card" id="t3-msg-card" style="display:none">
    <div class="card-title"><span class="icon">ğŸ’¬</span>ì•ˆë‚´ ë¬¸ì ìë™ ìƒì„±</div>
    <span class="template-label">ìë™ ì™„ì„±ëœ ë‚´ìš© í™•ì¸ í›„ ë§ˆë¬´ë¦¬ ì¸ì‚¬ë§ ì…ë ¥</span>
    <div class="msg-template-box" id="t3-msg-preview"></div>
    <div class="form-group" style="margin-bottom:1rem"><label>ë§ˆë¬´ë¦¬ ì¸ì‚¬ë§</label><textarea id="t3-closing" placeholder="ì˜ˆ: ì˜¤ëŠ˜ ì§‘ì¤‘ë ¥ì´ ì¢‹ì•˜ì–´ìš”! ìˆ™ì œ ê¼­ í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤ ğŸ™" style="min-height:65px" oninput="t3UpdatePreview()"></textarea></div>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <button class="btn btn-navy" onclick="t3CopyMsg()">ğŸ“‹ ë³µì‚¬</button>
      <button class="btn btn-primary" onclick="t3SaveToTab4()">íƒ­4ì— ì €ì¥</button>
      <button class="btn btn-ghost" onclick="document.getElementById('t3-msg-card').style.display='none'">ë‹«ê¸°</button>
    </div>
  </div>
  <div class="card">
    <div class="card-title"><span class="icon">ğŸ“‹</span>ìˆ˜ì—… ê¸°ë¡ ëª©ë¡</div>
    <div id="t3-list"></div>
  </div>
  <div class="modal-bg" id="t3-edit-modal">
    <div class="modal">
      <div class="modal-title">ìˆ˜ì—… ê¸°ë¡ í¸ì§‘</div>
      <div class="form-row">
        <div class="form-group"><label>ë‚ ì§œ</label><input type="date" id="t3e-date"></div>
        <div class="form-group"><label>íšŒì°¨</label><input type="number" id="t3e-num" min="1"></div>
        <div class="form-group full"><label>ì§„ë„ ë‚´ìš©</label><textarea id="t3e-content" style="min-height:65px"></textarea></div>
        <div class="form-group full"><label>ìˆ™ì œ ë²”ìœ„</label><textarea id="t3e-hw" style="min-height:50px"></textarea></div>
      </div>
      <div id="t3e-extra"></div>
      <div class="modal-actions"><button class="btn btn-primary" onclick="t3SaveEdit()">ì €ì¥</button><button class="btn btn-ghost" onclick="t3CloseModal()">ì·¨ì†Œ</button></div>
    </div>
  </div>
</div>
</div>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ íƒ­4: ì•ˆë‚´ ë¬¸ì â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="panel-tab4" class="tab-panel">
<div class="tab-content">
  <div class="page-title">ì•ˆë‚´ ë¬¸ì ë³´ê´€ì†Œ</div>
  <div class="page-sub">TAB 04 â€” MESSAGE LOG</div>
  <div class="card">
    <div class="card-title"><span class="icon">âœï¸</span>ë¬¸ì ì§ì ‘ ê¸°ë¡</div>
    <div class="form-group"><label>ë°œì†¡ ë‚ ì§œ</label><input type="date" id="t4-date"></div>
    <div class="form-group" style="margin-bottom:1rem"><label>ë¬¸ì ë‚´ìš©</label><textarea id="t4-text" placeholder="í•™ë¶€ëª¨ë‹˜ê»˜ ë³´ë‚¸ ë¬¸ì ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." style="min-height:100px"></textarea></div>
    <button class="btn btn-primary" onclick="t4Add()">ğŸ’¾ ì €ì¥</button>
  </div>
  <div class="card">
    <div class="card-title"><span class="icon">ğŸ’¬</span>ë¬¸ì ê¸°ë¡ ëª©ë¡ <span style="font-family:'Space Mono',monospace;font-size:0.65rem;color:var(--warm-gray);margin-left:auto" id="t4-count">0ê±´</span></div>
    <div class="search-bar"><span class="search-icon">ğŸ”</span><input type="text" id="t4-search" placeholder="ë‚ ì§œ ë˜ëŠ” ë‚´ìš©ìœ¼ë¡œ ê²€ìƒ‰..." oninput="t4Render()"></div>
    <div id="t4-list"></div>
  </div>
</div>
</div>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ íƒ­5: ì•½ì  ê¸°ë¡ì†Œ â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="panel-tab5" class="tab-panel">
<div class="tab-content">
  <div class="page-title">ì•½ì  ê¸°ë¡ì†Œ</div>
  <div class="page-sub">TAB 05 â€” WEAKNESS TRACKER</div>
  <div class="card">
    <div class="card-title"><span class="icon">â•</span>ìƒˆ ì•½ì  ì¶”ê°€</div>
    <div class="path-display" id="t5-path-preview"><span style="color:var(--warm-gray);font-size:0.78rem">ì•„ë˜ë¥¼ ì…ë ¥í•˜ë©´ ê²½ë¡œê°€ í‘œì‹œë©ë‹ˆë‹¤</span></div>
    <div class="form-row">
      <div class="form-group"><label>ê³¼ëª©</label><input type="text" id="t5-subject" placeholder="ê³µí†µìˆ˜í•™1" oninput="t5UpdatePath()"></div>
      <div class="form-group"><label>ëŒ€ë‹¨ì›</label><input type="text" id="t5-unit1" placeholder="ë‹¤í•­ì‹ ì—°ì‚°" oninput="t5UpdatePath()"></div>
      <div class="form-group"><label>ì†Œë‹¨ì›</label><input type="text" id="t5-unit2" placeholder="ì¸ìˆ˜ë¶„í•´" oninput="t5UpdatePath()"></div>
      <div class="form-group"><label>íŠ¹ì • ìœ í˜•</label><input type="text" id="t5-type" placeholder="ì´ì°¨ì‹" oninput="t5UpdatePath()"></div>
      <div class="form-group full"><label>ë©”ëª¨</label><textarea id="t5-memo" placeholder="ì–´ë–¤ ì‹¤ìˆ˜ë¥¼ í•˜ëŠ”ì§€, ìƒí™© ë“±..." style="min-height:70px"></textarea></div>
    </div>
    <div class="form-group" style="margin-bottom:1rem">
      <label>ì‚¬ì§„ ì²¨ë¶€ (ì˜¤ë‹µ ë…¸íŠ¸, ë¬¸ì œ ìº¡ì²˜ ë“±)</label>
      <div class="photo-upload-area" onclick="document.getElementById('t5-photo-input').click()">
        <div class="photo-upload-icon">ğŸ“·</div>
        <div class="photo-upload-text">í´ë¦­ ë˜ëŠ” ë“œë˜ê·¸í•´ì„œ ì‚¬ì§„ ì²¨ë¶€</div>
        <div class="photo-upload-sub">JPG Â· PNG Â· ì—¬ëŸ¬ ì¥ ê°€ëŠ¥</div>
      </div>
      <input type="file" id="t5-photo-input" accept="image/*" multiple style="display:none" onchange="t5HandlePhotos(this)">
      <div class="photo-preview-grid" id="t5-new-preview"></div>
    </div>
    <button class="btn btn-primary" onclick="t5Add()">ğŸ“Œ ì•½ì  ì¶”ê°€</button>
  </div>
  <div class="card">
    <div class="card-title"><span class="icon">ğŸ¯</span>ì•½ì  ëª©ë¡ <span style="font-family:'Space Mono',monospace;font-size:0.65rem;color:var(--warm-gray);margin-left:auto" id="t5-count"></span></div>
    <div class="search-bar"><span class="search-icon">ğŸ”</span><input type="text" id="t5-search" placeholder="ê³¼ëª©, ë‹¨ì›, ìœ í˜•ìœ¼ë¡œ ê²€ìƒ‰..." oninput="t5Render()"></div>
    <div class="filter-row" id="t5-filters"></div>
    <div id="t5-list"></div>
  </div>
  <div class="modal-bg" id="t5-edit-modal">
    <div class="modal">
      <div class="modal-title">ì•½ì  ê¸°ë¡ í¸ì§‘</div>
      <div class="form-row">
        <div class="form-group"><label>ê³¼ëª©</label><input type="text" id="t5e-subject"></div>
        <div class="form-group"><label>ëŒ€ë‹¨ì›</label><input type="text" id="t5e-unit1"></div>
        <div class="form-group"><label>ì†Œë‹¨ì›</label><input type="text" id="t5e-unit2"></div>
        <div class="form-group"><label>íŠ¹ì • ìœ í˜•</label><input type="text" id="t5e-type"></div>
        <div class="form-group full"><label>ë©”ëª¨</label><textarea id="t5e-memo" style="min-height:70px"></textarea></div>
      </div>
      <div class="form-group" style="margin-bottom:1rem">
        <label>ì²¨ë¶€ ì‚¬ì§„ ê´€ë¦¬</label>
        <div class="photo-upload-area" onclick="document.getElementById('t5e-photo-input').click()" style="padding:0.8rem"><div style="font-size:0.82rem;color:var(--warm-gray)">ğŸ“· ì‚¬ì§„ ì¶”ê°€</div></div>
        <input type="file" id="t5e-photo-input" accept="image/*" multiple style="display:none" onchange="t5HandleEditPhotos(this)">
        <div class="photo-preview-grid" id="t5e-preview"></div>
      </div>
      <div class="modal-actions"><button class="btn btn-primary" onclick="t5SaveEdit()">ì €ì¥</button><button class="btn btn-ghost" onclick="t5CloseModal()">ì·¨ì†Œ</button></div>
    </div>
  </div>
</div>
</div>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ íƒ­6: ë™ê¸°í™” â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="panel-tab6" class="tab-panel">
<div class="tab-content">
  <div class="page-title">ë™ê¸°í™” & ë°±ì—…</div>
  <div class="page-sub">TAB 06 â€” GITHUB GIST SYNC + LOCAL BACKUP</div>

  <div class="card">
    <div class="card-title"><span class="icon">âš™ï¸</span>GitHub Gist ì„¤ì •</div>
    <div class="config-status empty" id="t6-config-status">âš ï¸ í† í°ê³¼ Gist IDë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•˜ì„¸ìš”</div>
    <div class="form-group">
      <label>GitHub Personal Access Token</label>
      <div class="token-row">
        <input type="password" id="t6-token" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" oninput="t6UpdateStatus()">
        <button class="btn btn-ghost btn-sm" onclick="t6ToggleToken()" style="white-space:nowrap;flex-shrink:0">ğŸ‘ ë³´ê¸°</button>
      </div>
      <div class="hint">ì´ ê¸°ê¸° ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤.</div>
    </div>
    <div class="form-group">
      <label>Gist ID</label>
      <div style="display:flex;gap:8px">
        <input type="text" id="t6-gist-id" placeholder="ì²˜ìŒì—” ë¹„ì›Œë‘ì„¸ìš” â€” ì—…ë¡œë“œ ì‹œ ìë™ ìƒì„±" oninput="t6UpdateStatus()" style="flex:1">
        <button class="btn btn-ghost btn-sm" onclick="t6CopyGistId()" style="white-space:nowrap;flex-shrink:0">ë³µì‚¬</button>
      </div>
      <div class="hint">ì²˜ìŒ ì—…ë¡œë“œ ì‹œ ìë™ ìƒì„±ë©ë‹ˆë‹¤. ë‹¤ë¥¸ ê¸°ê¸°ì— ì´ IDë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div>
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <button class="btn btn-primary" onclick="t6SaveConfig()">ğŸ’¾ ì„¤ì • ì €ì¥</button>
      <button class="btn btn-danger" onclick="t6ClearConfig()">ì´ˆê¸°í™”</button>
    </div>
  </div>

  <div class="sync-status-bar">
    <div><div style="font-size:0.8rem;font-weight:700;margin-bottom:2px">ë™ê¸°í™” ìƒíƒœ</div><div class="sync-last" id="t6-last-time">ë§ˆì§€ë§‰ ë™ê¸°í™”: ì—†ìŒ</div></div>
    <span class="sync-badge never" id="t6-sync-badge">ë¯¸ë™ê¸°í™”</span>
  </div>

  <div class="card">
    <div class="card-title"><span class="icon">ğŸ“Š</span>í˜„ì¬ ì´ ê¸°ê¸°ì˜ ë°ì´í„°</div>
    <div class="data-summary">
      <div class="data-item"><div class="data-item-num" id="t6-sum-students">0</div><div class="data-item-label">í•™ìƒ</div></div>
      <div class="data-item"><div class="data-item-num" id="t6-sum-lessons">0</div><div class="data-item-label">ìˆ˜ì—…</div></div>
      <div class="data-item"><div class="data-item-num" id="t6-sum-msgs">0</div><div class="data-item-label">ë¬¸ì</div></div>
      <div class="data-item"><div class="data-item-num" id="t6-sum-weakness">0</div><div class="data-item-label">ì•½ì </div></div>
    </div>
    <button class="btn btn-ghost btn-sm" onclick="t6RefreshSummary()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
  </div>

  <div class="card">
    <div class="card-title"><span class="icon">ğŸ”„</span>ë™ê¸°í™” & ë°±ì—…</div>
    <div class="warning-box">
      <strong>â¬† ì—…ë¡œë“œ</strong> ì „ì— ìë™ìœ¼ë¡œ JSON ë°±ì—… íŒŒì¼ì´ ì €ì¥ë©ë‹ˆë‹¤. ì‹¤ìˆ˜ë¡œ ë¹ˆ ê¸°ê¸°ì—ì„œ ì—…ë¡œë“œí•´ë„ ë°±ì—…ì—ì„œ ë³µì›í•  ìˆ˜ ìˆì–´ìš”.<br>
      <strong>â¬‡ ë‹¤ìš´ë¡œë“œ</strong>ëŠ” Gist ë°ì´í„°ë¥¼ ì´ ê¸°ê¸°ì— ë®ì–´ì”ë‹ˆë‹¤.<br>
      <strong>ğŸ’¾ ë°±ì—…ë§Œ</strong>ì€ Gist ì—†ì´ JSON íŒŒì¼ë§Œ ë¡œì»¬ì— ì €ì¥í•©ë‹ˆë‹¤.<br>
      <strong>â€» ì‚¬ì§„ì€ ë™ê¸°í™”ì—ì„œ ì œì™¸</strong> (ê° ê¸°ê¸°ì— ê°œë³„ ì €ì¥)
    </div>
    <div class="sync-actions">
      <div class="sync-btn-card upload disabled" id="t6-upload-card" onclick="t6Upload()">
        <div class="sync-icon" id="t6-upload-icon">â¬†ï¸</div>
        <div class="sync-title">ì—…ë¡œë“œ</div>
        <div class="sync-desc">ë°±ì—… í›„<br>Gistì— ì €ì¥</div>
      </div>
      <div class="sync-btn-card download disabled" id="t6-download-card" onclick="t6Download()">
        <div class="sync-icon" id="t6-download-icon">â¬‡ï¸</div>
        <div class="sync-title">ë‹¤ìš´ë¡œë“œ</div>
        <div class="sync-desc">Gist â†’<br>ì´ ê¸°ê¸° ì ìš©</div>
      </div>
      <div class="sync-btn-card backup" id="t6-backup-card" onclick="t6BackupOnly()">
        <div class="sync-icon">ğŸ’¾</div>
        <div class="sync-title">ë°±ì—…ë§Œ</div>
        <div class="sync-desc">JSON íŒŒì¼<br>ë¡œì»¬ ì €ì¥</div>
      </div>
    </div>

    <!-- ë°±ì—…ì—ì„œ ë³µì› -->
    <div style="margin-top:0.5rem">
      <label>ë°±ì—… íŒŒì¼ì—ì„œ ë³µì›</label>
      <div style="display:flex;gap:8px;margin-top:5px;flex-wrap:wrap;align-items:center">
        <input type="file" id="t6-restore-input" accept=".json" style="font-size:0.78rem;flex:1" onchange="t6RestoreFromFile(this)">
      </div>
      <div class="hint">ì´ì „ì— ì €ì¥í•œ tutoring_backup_ë‚ ì§œ.json íŒŒì¼ì„ ì„ íƒí•˜ë©´ ë³µì›ë©ë‹ˆë‹¤.</div>
    </div>

    <div class="section-sep"></div>
    <label>ì‘ì—… ë¡œê·¸</label>
    <div class="log-box" id="t6-log"><div class="log-line"><span class="log-time">--:--:--</span><span class="log-msg info">ì„¤ì •ì„ ì™„ë£Œí•˜ë©´ ë™ê¸°í™”ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span></div></div>
  </div>

  <div class="card">
    <div class="card-title"><span class="icon">ğŸ“±</span>ë‹¤ë¥¸ ê¸°ê¸° ì„¤ì • ë°©ë²•</div>
    <div style="font-size:0.83rem;line-height:2;color:var(--navy)">
      <div><span class="step-badge">STEP 1</span> &nbsp;ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ ì´ ì‚¬ì´íŠ¸ ì—´ê¸°</div>
      <div><span class="step-badge">STEP 2</span> &nbsp;íƒ­6 â†’ ê°™ì€ í† í° + ì´ ê¸°ê¸°ì˜ <b>Gist ID</b> ì…ë ¥</div>
      <div><span class="step-badge">STEP 3</span> &nbsp;ì„¤ì • ì €ì¥ â†’ <b>â¬‡ ë‹¤ìš´ë¡œë“œ</b></div>
      <div><span class="step-badge">STEP 4</span> &nbsp;ì™„ë£Œ! ì´í›„ì—” ìˆ˜ì—… í›„ ì—…ë¡œë“œ â†’ í°ì—ì„œ ë‹¤ìš´ë¡œë“œ</div>
    </div>
  </div>
</div>
</div>

</div><!-- /content-area -->

<!-- ê³µìš© ë¼ì´íŠ¸ë°•ìŠ¤ -->
<div class="lightbox" id="lightbox" onclick="closeLightbox()">
  <span class="lightbox-close" onclick="closeLightbox()">âœ•</span>
  <img id="lightbox-img" src="" alt="">
</div>

<!-- ê³µìš© í† ìŠ¤íŠ¸ -->
<div class="toast" id="toast"></div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ê³µí†µ ìœ í‹¸
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function $(id){return document.getElementById(id);}
function escH(s){return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');}
function escR(s){return s.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');}
function today(){return new Date().toISOString().split('T')[0];}
function showToast(msg,dur=2800){const t=$('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),dur);}
function openLightbox(src){$('lightbox-img').src=src;$('lightbox').classList.add('open');}
function closeLightbox(){$('lightbox').classList.remove('open');}
document.addEventListener('keydown',e=>{if(e.key==='Escape'){closeLightbox();t3CloseModal();t5CloseModal();}});

/* â”€â”€ íƒ­ ì „í™˜ â”€â”€ */
let currentTab='dashboard';
function showTab(id){
  document.querySelectorAll('.tab-panel').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  $('panel-'+id).classList.add('active');
  document.querySelector(`[data-tab="${id}"]`).classList.add('active');
  currentTab=id;
  if(id==='dashboard')dashRefresh();
  if(id==='tab6')t6RefreshSummary();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ëŒ€ì‹œë³´ë“œ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function dashRefresh(){
  // íƒ­1 í•™ìƒ
  const students=JSON.parse(localStorage.getItem('t1')||'[]');
  $('dc-students').textContent=students.length+'ëª…';
  const bar=$('dash-student-bar');
  if(!students.length){
    bar.innerHTML=`<div class="student-bar"><div class="student-avatar">?</div><div class="student-info"><div class="student-name">í•™ìƒ ì—†ìŒ</div><div class="student-meta">íƒ­1ì—ì„œ í•™ìƒì„ ì¶”ê°€í•˜ì„¸ìš”</div></div></div>`;
  } else {
    bar.innerHTML=students.slice(0,3).map(s=>`
      <div class="student-bar" style="cursor:pointer" onclick="showTab('tab1')">
        <div class="student-avatar">${escH((s.name||'?').charAt(0))}</div>
        <div class="student-info">
          <div class="student-name">${escH(s.name||'ì´ë¦„ ì—†ìŒ')}</div>
          <div class="student-meta">${escH([s.grade,s.subject].filter(Boolean).join(' Â· ')||'ì •ë³´ ì—†ìŒ')}</div>
        </div>
        ${students.length>1?`<div style="font-family:'Space Mono',monospace;font-size:0.62rem;color:rgba(245,240,232,0.4);margin-left:auto">ì´ ${students.length}ëª…</div>`:''}
      </div>`).join('');
  }
  // í—¤ë” ë©”íƒ€
  if(students.length===1){
    $('header-meta').textContent=[students[0].grade,students[0].subject].filter(Boolean).join(' Â· ')||'ê³¼ì™¸ë…¸íŠ¸';
  } else if(students.length>1){
    $('header-meta').textContent=`í•™ìƒ ${students.length}ëª…`;
  } else {
    $('header-meta').textContent='TUTORING NOTE';
  }
  // íƒ­3
  const l3=JSON.parse(localStorage.getItem('t3')||'[]');
  $('dc-lessons').textContent=l3.length+'íšŒ';
  const grid=$('dash-lesson-grid');
  if(!l3.length){grid.innerHTML='<div style="font-size:0.78rem;color:var(--warm-gray)">íƒ­3ì—ì„œ ìˆ˜ì—…ì„ ê¸°ë¡í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>';}
  else{grid.innerHTML=l3.map(l=>{const d=l.date?l.date.slice(5).replace('-','/'):'';return`<div class="lesson-box done" title="${l.date}Â·${l.content||''}"><span class="lb-num">${l.num}</span><span class="lb-date">${d}</span></div>`;}).join('');}
  // íƒ­4
  const m4=JSON.parse(localStorage.getItem('t4')||'[]');
  $('dc-msgs').textContent=m4.length+'ê±´';
  const rm=$('dash-recent-msg');
  if(!m4.length)rm.innerHTML='<div style="font-size:0.78rem;color:var(--warm-gray)">íƒ­4ì—ì„œ ë¬¸ìë¥¼ ê¸°ë¡í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>';
  else{const m=m4[0],d=(m.date||'').replace(/-/g,'.'),prev=m.text.length>100?m.text.slice(0,100)+'â€¦':m.text;rm.innerHTML=`<div class="recent-msg-date">${d}</div><div class="recent-msg">${escH(prev)}</div>`;}
  // íƒ­5
  const w5=JSON.parse(localStorage.getItem('t5')||'[]');
  $('dc-weakness').textContent=w5.length+'ê±´';
  const rw=$('dash-recent-weakness');
  if(!w5.length)rw.innerHTML='<div style="font-size:0.78rem;color:var(--warm-gray)">íƒ­5ì—ì„œ ì•½ì ì„ ê¸°ë¡í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>';
  else rw.innerHTML=w5.slice(0,4).map(w=>{const p=[w.subject,w.unit1,w.unit2].filter(Boolean);return`<span class="weakness-tag">${p.map(x=>`<span>${escH(x)}</span><span class="wt-sep">â€º</span>`).join('')}<span class="wt-leaf">${escH(w.type)}</span></span>`;}).join('');
  // íƒ­2
  const f2=JSON.parse(localStorage.getItem('t2')||'[]');
  $('dc-folders').textContent=f2.length+' í´ë”';
  // ë™ê¸°í™”
  const sm=JSON.parse(localStorage.getItem('t6-meta')||'null');
  $('dc-sync').textContent=sm?(sm.dir==='upload'?'â¬† ì—…ë¡œë“œë¨':'â¬‡ ë‹¤ìš´ë¡œë“œë¨'):'ë¯¸ë™ê¸°í™”';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   íƒ­1 - í•™ìƒ ë¦¬ìŠ¤íŠ¸ + ìƒì„¸
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let t1students=[];   // í•™ìƒ ë°°ì—´
let t1currentIdx=null; // í˜„ì¬ ì„ íƒëœ í•™ìƒ ì¸ë±ìŠ¤ (null=ì‹ ê·œ)

const T1_FIELDS=['name','grade','student_phone','parent_phone','school','day','time','subject','hourly','hrs','sessions','memo'];

function t1Load(){
  const raw=localStorage.getItem('t1');
  // êµ¬ë²„ì „ í˜¸í™˜: ë‹¨ì¼ ê°ì²´ì˜€ìœ¼ë©´ ë°°ì—´ë¡œ ë³€í™˜
  if(raw){
    const parsed=JSON.parse(raw);
    if(Array.isArray(parsed)) t1students=parsed;
    else if(parsed && typeof parsed==='object' && parsed.name) t1students=[parsed];
    else t1students=[];
  } else { t1students=[]; }
  t1RenderList();
}

function t1Save_(){localStorage.setItem('t1',JSON.stringify(t1students));}

function t1RenderList(){
  const container=$('t1-student-list');
  if(!t1students.length){
    container.innerHTML='<div class="empty-state"><div class="empty-icon">ğŸ‘¤</div>í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.<br>ì•„ë˜ ë²„íŠ¼ìœ¼ë¡œ ì¶”ê°€í•˜ì„¸ìš”.</div>';
    return;
  }
  container.innerHTML=t1students.map((s,i)=>`
    <div class="student-card" onclick="t1OpenDetail(${i})">
      <div class="sc-avatar">${escH((s.name||'?').charAt(0))}</div>
      <div class="sc-info">
        <div class="sc-name">${escH(s.name||'ì´ë¦„ ì—†ìŒ')}</div>
        <div class="sc-meta">${escH([s.grade,s.subject,s.school].filter(Boolean).join(' Â· ')||'ì •ë³´ ì—†ìŒ')}</div>
      </div>
      <span class="sc-arrow">â€º</span>
    </div>`).join('');
}

function t1ShowList(){
  $('t1-list-view').classList.add('active');
  $('t1-detail-view').classList.remove('active');
  t1RenderList();
}

function t1OpenNew(){
  t1currentIdx=null;
  T1_FIELDS.forEach(f=>{const el=$('t1-'+f);if(el)el.value='';});
  t1CalcFee();
  $('t1-detail-header').innerHTML=`
    <div class="detail-header">
      <div class="detail-avatar">+</div>
      <div><div class="detail-name">ìƒˆ í•™ìƒ</div><div class="detail-meta">ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•˜ì„¸ìš”</div></div>
    </div>`;
  $('t1-unsaved').classList.remove('visible');
  $('t1-list-view').classList.remove('active');
  $('t1-detail-view').classList.add('active');
}

function t1OpenDetail(i){
  t1currentIdx=i;
  const s=t1students[i];
  T1_FIELDS.forEach(f=>{const el=$('t1-'+f);if(el&&s[f]!==undefined)el.value=s[f];else if(el)el.value='';});
  t1CalcFee();
  $('t1-detail-header').innerHTML=`
    <div class="detail-header">
      <div class="detail-avatar">${escH((s.name||'?').charAt(0))}</div>
      <div>
        <div class="detail-name">${escH(s.name||'ì´ë¦„ ì—†ìŒ')}</div>
        <div class="detail-meta">${escH([s.grade,s.subject].filter(Boolean).join(' Â· ')||'ì •ë³´ ì—†ìŒ')}</div>
      </div>
    </div>`;
  $('t1-unsaved').classList.remove('visible');
  $('t1-list-view').classList.remove('active');
  $('t1-detail-view').classList.add('active');
}

function t1Mark(){$('t1-unsaved').classList.add('visible');}

function t1CalcFee(){
  const h=parseFloat($('t1-hourly').value)||0,t=parseFloat($('t1-hrs').value)||0,s=parseFloat($('t1-sessions').value)||0,total=h*t*s;
  $('t1-fee-breakdown').textContent=(h&&t&&s)?`${h.toLocaleString()}ì› Ã— ${t*s}h (${t}h Ã— ${s}íšŒ)`:'ì‹œê¸‰ Ã— ì‹œê°„ Ã— íšŸìˆ˜ ì…ë ¥ ì‹œ ìë™ê³„ì‚°';
  $('t1-fee-total').textContent=total>0?total.toLocaleString()+'ì›':'â€”';
}

function t1SaveCurrent(){
  const d={};
  T1_FIELDS.forEach(f=>{const el=$('t1-'+f);if(el)d[f]=el.value;});
  if(!d.name){showToast('â— í•™ìƒ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”');return;}
  if(t1currentIdx===null){
    t1students.push(d);
    t1currentIdx=t1students.length-1;
  } else {
    t1students[t1currentIdx]=d;
  }
  t1Save_();
  $('t1-unsaved').classList.remove('visible');
  // í—¤ë” ê°±ì‹ 
  $('t1-detail-header').innerHTML=`
    <div class="detail-header">
      <div class="detail-avatar">${escH((d.name||'?').charAt(0))}</div>
      <div>
        <div class="detail-name">${escH(d.name)}</div>
        <div class="detail-meta">${escH([d.grade,d.subject].filter(Boolean).join(' Â· ')||'ì •ë³´ ì—†ìŒ')}</div>
      </div>
    </div>`;
  showToast('âœ… ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
}

function t1DeleteCurrent(){
  if(t1currentIdx===null){showToast('â— ë¨¼ì € ì €ì¥í•˜ì„¸ìš”');return;}
  const name=t1students[t1currentIdx].name||'ì´ í•™ìƒ';
  if(!confirm(`"${name}"ì„(ë¥¼) ì‚­ì œí• ê¹Œìš”?`))return;
  t1students.splice(t1currentIdx,1);
  t1Save_();
  t1ShowList();
  showToast('ğŸ—‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   íƒ­2 - ìë£Œ ëª¨ìŒì‹¤
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const T2_DEFAULT=[{id:'f1',emoji:'ğŸ«',name:'í•™êµ ê¸°ì¶œ íŒŒì¼',files:[]},{id:'f2',emoji:'ğŸ“',name:'ëª¨ì˜ê³ ì‚¬',files:[]},{id:'f3',emoji:'â•',name:'ì¶”ê°€ ìë£Œ',files:[]}];
let t2folders=[];
function t2Load(){const r=localStorage.getItem('t2');t2folders=r?JSON.parse(r):JSON.parse(JSON.stringify(T2_DEFAULT));t2Render();}
function t2Save(){localStorage.setItem('t2',JSON.stringify(t2folders));}
function t2Render(){
  const c=$('t2-folder-list');
  if(!t2folders.length){c.innerHTML='<div class="empty-state"><div class="empty-icon">ğŸ“‚</div>í´ë”ê°€ ì—†ìŠµë‹ˆë‹¤</div>';return;}
  c.innerHTML=t2folders.map((f,fi)=>`
  <div class="folder-wrap">
    <div class="folder-header" onclick="t2Toggle(${fi})">
      <span>${f.emoji}</span>
      <input class="folder-name-input" value="${escH(f.name)}" onclick="event.stopPropagation()" onchange="t2Rename(${fi},this.value)" title="ì´ë¦„ ìˆ˜ì •">
      <span class="folder-count">${f.files.length}ê°œ íŒŒì¼</span>
      <span class="folder-chevron ${f.open?'open':''}">â–¶</span>
    </div>
    <div class="folder-body ${f.open?'open':''}">
      ${!f.files.length?'<div style="font-size:0.78rem;color:var(--warm-gray);padding:0.3rem 0">íŒŒì¼ ê²½ë¡œê°€ ì—†ìŠµë‹ˆë‹¤</div>':f.files.map((fl,fi2)=>`
      <div class="file-item">
        <span class="file-icon">ğŸ“„</span>
        <span class="file-name">${escH(fl.name)}</span>
        <a class="file-open-btn" href="${escH(fl.path)}" target="_blank">ì—´ê¸° â†—</a>
        <button class="btn btn-danger" onclick="t2RemoveFile(${fi},${fi2})">ì‚­ì œ</button>
        <div class="file-path">${escH(fl.path)}</div>
      </div>`).join('')}
      <div class="add-file-form" id="t2-add-form-${fi}">
        <div class="form-row" style="margin-bottom:0.7rem">
          <div class="form-group"><label>íŒŒì¼ ì´ë¦„</label><input type="text" id="t2-fname-${fi}" placeholder="íŒŒì¼ëª….pdf"></div>
          <div class="form-group"><label>ë¡œì»¬ ê²½ë¡œ ë˜ëŠ” URL</label><input type="text" id="t2-fpath-${fi}" placeholder="C:\\...\\íŒŒì¼.pdf"></div>
        </div>
        <div style="display:flex;gap:8px"><button class="btn btn-primary btn-sm" onclick="t2AddFile(${fi})">ì¶”ê°€</button><button class="btn btn-ghost btn-sm" onclick="t2ToggleAddForm(${fi})">ì·¨ì†Œ</button></div>
      </div>
      <div style="margin-top:0.7rem;display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn btn-ghost btn-sm" onclick="t2ToggleAddForm(${fi})">+ íŒŒì¼ ì¶”ê°€</button>
        <button class="btn btn-danger" onclick="t2RemoveFolder(${fi})">í´ë” ì‚­ì œ</button>
      </div>
    </div>
  </div>`).join('');
}
function t2Toggle(fi){t2folders[fi].open=!t2folders[fi].open;t2Save();t2Render();}
function t2Rename(fi,v){t2folders[fi].name=v;t2Save();}
function t2ToggleAddForm(fi){const f=document.getElementById('t2-add-form-'+fi);f.classList.toggle('open');}
function t2ToggleNewFolder(){$('t2-new-folder-form').classList.toggle('open');}
function t2AddFile(fi){const n=($('t2-fname-'+fi).value||'').trim(),p=($('t2-fpath-'+fi).value||'').trim();if(!n||!p){showToast('â— íŒŒì¼ ì´ë¦„ê³¼ ê²½ë¡œë¥¼ ì…ë ¥í•˜ì„¸ìš”');return;}t2folders[fi].files.push({name:n,path:p});t2folders[fi].open=true;t2Save();t2Render();showToast('âœ… íŒŒì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤');}
function t2RemoveFile(fi,ii){if(!confirm('íŒŒì¼ì„ ì‚­ì œí• ê¹Œìš”?'))return;t2folders[fi].files.splice(ii,1);t2Save();t2Render();t2folders[fi].open=true;t2Render();}
function t2AddFolder(){const e=$('t2-new-emoji').value,n=($('t2-new-name').value||'').trim();if(!n){showToast('â— í´ë” ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”');return;}t2folders.push({id:'f'+Date.now(),emoji:e,name:n,files:[],open:true});t2Save();t2Render();$('t2-new-name').value='';$('t2-new-folder-form').classList.remove('open');showToast('ğŸ“ í´ë”ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤');}
function t2RemoveFolder(fi){if(!confirm(`"${t2folders[fi].name}" í´ë”ë¥¼ ì‚­ì œí• ê¹Œìš”?`))return;t2folders.splice(fi,1);t2Save();t2Render();showToast('ğŸ—‘ í´ë”ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   íƒ­3 - ìˆ˜ì—… ì§„ë„
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let t3lessons=[],t3editIdx=null,t3curMsg=null,t3extraCount=0;
function t3Load(){const r=localStorage.getItem('t3');t3lessons=r?JSON.parse(r):[];t3Render();t3SetNext();$('t3-date').value=today();}
function t3Save_(){localStorage.setItem('t3',JSON.stringify(t3lessons));}
function t3SetNext(){const n=t3lessons.length+1;$('t3-num').value=n;$('t3-next-badge').textContent=n+'íšŒì°¨';}
function t3AddExtra(){t3extraCount++;const w=$('t3-extra-fields'),d=document.createElement('div');d.className='extra-field-item';d.innerHTML=`<input type="text" placeholder="í•­ëª©ëª…" class="extra-key"><textarea placeholder="ë‚´ìš©" style="min-height:50px" class="extra-val"></textarea><button class="remove-field-btn" onclick="this.parentElement.remove()">âœ•</button>`;w.appendChild(d);}
function t3GetExtras(container){const ex={};container.querySelectorAll('.extra-field-item').forEach(item=>{const k=item.querySelector('.extra-key').value.trim(),v=item.querySelector('.extra-val').value.trim();if(k)ex[k]=v;});return ex;}
function t3Save(){
  const num=parseInt($('t3-num').value)||t3lessons.length+1,date=$('t3-date').value,content=($('t3-content').value||'').trim(),hw=($('t3-hw').value||'').trim();
  if(!date){showToast('â— ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”');return;}
  if(!content){showToast('â— ì§„ë„ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”');return;}
  const extras=t3GetExtras($('t3-extra-fields'));
  const lesson={num,date,content,hw,extras};
  t3lessons.push(lesson);t3lessons.sort((a,b)=>new Date(a.date)-new Date(b.date));t3lessons.forEach((l,i)=>l.num=i+1);
  t3Save_();t3Render();t3SetNext();
  $('t3-content').value='';$('t3-hw').value='';$('t3-date').value=today();$('t3-extra-fields').innerHTML='';t3extraCount=0;
  t3curMsg=lesson;t3OpenMsg();showToast('âœ… '+num+'íšŒì°¨ ìˆ˜ì—…ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
}
function t3OpenMsg(){$('t3-msg-card').style.display='block';$('t3-closing').value='';t3UpdatePreview();$('t3-msg-card').scrollIntoView({behavior:'smooth'});}
function t3BuildMsg(l,closing){let m=`ì•ˆë…•í•˜ì„¸ìš” ì–´ë¨¸ë‹ˆ, ì˜¤ëŠ˜ ${l.num}íšŒì°¨ ìˆ˜ì—… ì˜ ë§ˆì³¤ìŠµë‹ˆë‹¤ ğŸ˜Š\n\nğŸ“– ì˜¤ëŠ˜ ì§„ë„: ${l.content}\n\n`;if(l.hw)m+=`ğŸ“ ìˆ™ì œ ë²”ìœ„: ${l.hw}\n\n`;if(l.extras)Object.entries(l.extras).forEach(([k,v])=>{if(v)m+=`ğŸ“Œ ${k}: ${v}\n\n`;});if(closing&&closing.trim())m+=closing.trim();return m.trim();}
function t3UpdatePreview(){if(!t3curMsg)return;$('t3-msg-preview').textContent=t3BuildMsg(t3curMsg,$('t3-closing').value);}
function t3CopyMsg(){if(!t3curMsg)return;const text=t3BuildMsg(t3curMsg,$('t3-closing').value);navigator.clipboard.writeText(text).then(()=>showToast('ğŸ“‹ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤')).catch(()=>{const ta=document.createElement('textarea');ta.value=text;document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);showToast('ğŸ“‹ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤');});}
function t3SaveToTab4(){if(!t3curMsg)return;const text=t3BuildMsg(t3curMsg,$('t3-closing').value);const m=JSON.parse(localStorage.getItem('t4')||'[]');m.unshift({date:t3curMsg.date,text,id:Date.now()});localStorage.setItem('t4',JSON.stringify(m));showToast('âœ… íƒ­4ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');$('t3-msg-card').style.display='none';}
function t3Render(){t3RenderGrid();t3RenderList();}
function t3RenderGrid(){const g=$('t3-grid');if(!t3lessons.length){g.innerHTML='<div style="font-size:0.78rem;color:var(--warm-gray)">ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</div>';return;}g.innerHTML=t3lessons.map((l,i)=>{const d=l.date?l.date.slice(5).replace('-','/'):'';return`<div class="lesson-box done" onclick="t3ScrollTo(${i})" title="${l.date}Â·${l.content||''}"><span class="lb-num">${l.num}</span><span class="lb-date">${d}</span></div>`;}).join('');}
function t3ScrollTo(i){const el=document.getElementById('t3-rec-'+(t3lessons.length-1-i));if(el)el.scrollIntoView({behavior:'smooth'});}
function t3RenderList(){const list=$('t3-list');if(!t3lessons.length){list.innerHTML='<div class="empty-state"><div class="empty-icon">ğŸ“–</div>ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</div>';return;}list.innerHTML=[...t3lessons].reverse().map((l,ri)=>{const i=t3lessons.length-1-ri;const exH=l.extras?Object.entries(l.extras).filter(([k])=>k).map(([k,v])=>`<div class="lesson-field"><div class="lesson-field-label">${escH(k)}</div><div class="lesson-field-value">${escH(v||'-')}</div></div>`).join(''):'';return`<div class="lesson-record" id="t3-rec-${ri}"><div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:0.7rem"><span class="lesson-badge">${l.num}íšŒì°¨</span><span class="lesson-date-label">${(l.date||'').replace(/-/g,'.')}</span></div><div><div class="lesson-field"><div class="lesson-field-label">ì§„ë„ ë‚´ìš©</div><div class="lesson-field-value">${escH(l.content)}</div></div><div class="lesson-field"><div class="lesson-field-label">ìˆ™ì œ ë²”ìœ„</div><div class="lesson-field-value hw-value">${escH(l.hw||'â€”')}</div></div>${exH}</div><div style="display:flex;gap:6px;margin-top:0.7rem;flex-wrap:wrap"><button class="btn btn-ghost btn-sm" onclick="t3OpenEditModal(${i})">ìˆ˜ì •</button><button class="btn btn-ghost btn-sm" onclick="t3GenMsg(${i})">ğŸ’¬ ë¬¸ì ìƒì„±</button><button class="btn btn-danger" onclick="t3Delete(${i})">ì‚­ì œ</button></div></div>`;}).join('');}
function t3Delete(i){if(!confirm(t3lessons[i].num+'íšŒì°¨ ìˆ˜ì—… ê¸°ë¡ì„ ì‚­ì œí• ê¹Œìš”?'))return;t3lessons.splice(i,1);t3lessons.forEach((l,idx)=>l.num=idx+1);t3Save_();t3Render();t3SetNext();showToast('ğŸ—‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');}
function t3GenMsg(i){t3curMsg=t3lessons[i];$('t3-msg-card').style.display='block';$('t3-closing').value='';t3UpdatePreview();$('t3-msg-card').scrollIntoView({behavior:'smooth'});}
function t3OpenEditModal(i){t3editIdx=i;const l=t3lessons[i];$('t3e-date').value=l.date||'';$('t3e-num').value=l.num;$('t3e-content').value=l.content||'';$('t3e-hw').value=l.hw||'';const ex=$('t3e-extra');ex.innerHTML='';if(l.extras)Object.entries(l.extras).forEach(([k,v])=>{const d=document.createElement('div');d.className='extra-field-item';d.innerHTML=`<input type="text" value="${escH(k)}" placeholder="í•­ëª©ëª…" class="extra-key"><textarea style="min-height:50px" class="extra-val">${escH(v)}</textarea><button class="remove-field-btn" onclick="this.parentElement.remove()">âœ•</button>`;ex.appendChild(d);});$('t3-edit-modal').classList.add('open');}
function t3CloseModal(){$('t3-edit-modal').classList.remove('open');t3editIdx=null;}
function t3SaveEdit(){if(t3editIdx===null)return;const l=t3lessons[t3editIdx];l.date=$('t3e-date').value;l.num=parseInt($('t3e-num').value);l.content=$('t3e-content').value.trim();l.hw=$('t3e-hw').value.trim();l.extras=t3GetExtras($('t3e-extra'));t3lessons.sort((a,b)=>new Date(a.date)-new Date(b.date));t3lessons.forEach((x,i)=>x.num=i+1);t3Save_();t3Render();t3SetNext();t3CloseModal();showToast('âœ… ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤');}
document.getElementById('t3-edit-modal').addEventListener('click',function(e){if(e.target===this)t3CloseModal();});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   íƒ­4 - ì•ˆë‚´ ë¬¸ì
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let t4msgs=[];
function t4Load(){const r=localStorage.getItem('t4');t4msgs=r?JSON.parse(r):[];$('t4-date').value=today();t4Render();}
function t4Save_(){localStorage.setItem('t4',JSON.stringify(t4msgs));}
function t4Add(){const date=$('t4-date').value,text=($('t4-text').value||'').trim();if(!date){showToast('â— ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”');return;}if(!text){showToast('â— ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”');return;}t4msgs.unshift({date,text,id:Date.now()});t4Save_();t4Render();$('t4-text').value='';$('t4-date').value=today();showToast('âœ… ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');}
function t4Render(){
  const q=($('t4-search').value||'').toLowerCase();
  const list=$('t4-list'),cnt=$('t4-count');
  let filtered=t4msgs;
  if(q)filtered=t4msgs.filter(m=>(m.date||'').includes(q)||(m.text||'').toLowerCase().includes(q));
  cnt.textContent=filtered.length+'ê±´'+(q?' (ê²€ìƒ‰)':'');
  if(!filtered.length){list.innerHTML=`<div class="empty-state"><div class="empty-icon">ğŸ’¬</div>${q?'ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ':'ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤'}</div>`;return;}
  list.innerHTML=filtered.map(m=>{
    const ri=t4msgs.indexOf(m),d=(m.date||''),parts=d.split('-');
    const md=parts.length>=3?parts[1]+'.'+parts[2]:d,wd=d?['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '][new Date(d).getDay()]:'';
    const tH=q?escH(m.text).replace(new RegExp(escR(escH(q)),'gi'),s=>`<mark class="highlight">${s}</mark>`):escH(m.text);
    return`<div class="msg-item"><div class="msg-left"><div class="msg-date-num">${md}</div><div class="msg-date-day">${wd}<br>${parts[0]||''}</div></div><div style="flex:1"><div class="msg-bubble" id="t4-bubble-${ri}">${tH}</div><div style="display:flex;gap:6px;margin-top:0.6rem;flex-wrap:wrap"><button class="btn btn-ghost btn-sm" onclick="t4Copy(${ri})">ğŸ“‹ ë³µì‚¬</button><button class="btn btn-ghost btn-sm" onclick="t4StartEdit(${ri})">ìˆ˜ì •</button><button class="btn btn-danger" onclick="t4Delete(${ri})">ì‚­ì œ</button></div></div></div>`;
  }).join('');
}
function t4Copy(i){const text=t4msgs[i].text;navigator.clipboard.writeText(text).then(()=>showToast('ğŸ“‹ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤')).catch(()=>{const ta=document.createElement('textarea');ta.value=text;document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);showToast('ğŸ“‹ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤');});}
function t4StartEdit(i){const b=document.getElementById('t4-bubble-'+i);b.classList.add('editing');b.innerHTML=`<textarea id="t4-eta-${i}" style="min-height:100px">${escH(t4msgs[i].text)}</textarea><div style="padding:0 1rem 0.8rem;display:flex;gap:6px"><button class="btn btn-primary btn-sm" onclick="t4SaveEdit(${i})">ì €ì¥</button><button class="btn btn-ghost btn-sm" onclick="t4Render()">ì·¨ì†Œ</button></div>`;}
function t4SaveEdit(i){const v=(document.getElementById('t4-eta-'+i).value||'').trim();if(!v){showToast('â— ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”');return;}t4msgs[i].text=v;t4Save_();t4Render();showToast('âœ… ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤');}
function t4Delete(i){if(!confirm('ì´ ë¬¸ì ê¸°ë¡ì„ ì‚­ì œí• ê¹Œìš”?'))return;t4msgs.splice(i,1);t4Save_();t4Render();showToast('ğŸ—‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   íƒ­5 - ì•½ì  ê¸°ë¡ì†Œ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let t5items=[],t5editIdx=null,t5newPhotos=[],t5editPhotos=[],t5activeFilter=null;
function t5Load(){const r=localStorage.getItem('t5');t5items=r?JSON.parse(r):[];t5Render();}
function t5Save_(){localStorage.setItem('t5',JSON.stringify(t5items));}
function t5UpdatePath(){const s=($('t5-subject').value||'').trim(),u1=($('t5-unit1').value||'').trim(),u2=($('t5-unit2').value||'').trim(),t=($('t5-type').value||'').trim(),parts=[s,u1,u2].filter(Boolean),prev=$('t5-path-preview');if(!parts.length&&!t){prev.innerHTML='<span style="color:var(--warm-gray);font-size:0.78rem">ì•„ë˜ë¥¼ ì…ë ¥í•˜ë©´ ê²½ë¡œê°€ í‘œì‹œë©ë‹ˆë‹¤</span>';return;}let h=parts.map(p=>`<span class="path-seg">${escH(p)}</span><span class="path-sep">â€º</span>`).join('');if(t)h+=`<span class="path-leaf">${escH(t)}</span>`;prev.innerHTML=h;}
function t5HandlePhotos(input){Array.from(input.files).forEach(f=>{const r=new FileReader();r.onload=e=>{t5newPhotos.push(e.target.result);t5RenderNewPrev();};r.readAsDataURL(f);});input.value='';}
function t5RenderNewPrev(){const c=$('t5-new-preview');c.innerHTML=t5newPhotos.map((s,i)=>`<div class="photo-thumb"><img src="${s}" alt="ì‚¬ì§„${i+1}"><button class="remove-btn" onclick="t5newPhotos.splice(${i},1);t5RenderNewPrev()">âœ•</button></div>`).join('');}
function t5Add(){const subject=($('t5-subject').value||'').trim(),unit1=($('t5-unit1').value||'').trim(),unit2=($('t5-unit2').value||'').trim(),type=($('t5-type').value||'').trim(),memo=($('t5-memo').value||'').trim();if(!subject){showToast('â— ê³¼ëª©ì„ ì…ë ¥í•˜ì„¸ìš”');return;}if(!type){showToast('â— íŠ¹ì • ìœ í˜•ì„ ì…ë ¥í•˜ì„¸ìš”');return;}t5items.unshift({id:Date.now(),subject,unit1,unit2,type,memo,photos:[...t5newPhotos],date:today()});t5Save_();['t5-subject','t5-unit1','t5-unit2','t5-type','t5-memo'].forEach(id=>$(id).value='');t5newPhotos=[];t5RenderNewPrev();t5UpdatePath();t5Render();showToast('ğŸ“Œ ì•½ì ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤');}
function t5Render(){
  const q=($('t5-search').value||'').toLowerCase();
  t5RenderFilters();
  let filtered=t5items;
  if(t5activeFilter)filtered=filtered.filter(w=>w.subject===t5activeFilter);
  if(q)filtered=filtered.filter(w=>[w.subject,w.unit1,w.unit2,w.type,w.memo].join(' ').toLowerCase().includes(q));
  $('t5-count').textContent=filtered.length+'ê±´';
  const list=$('t5-list');
  if(!filtered.length){list.innerHTML=`<div class="empty-state"><div class="empty-icon">ğŸ¯</div>${q||t5activeFilter?'ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ':'ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤'}</div>`;return;}
  list.innerHTML=filtered.map(w=>{
    const ri=t5items.indexOf(w),parts=[w.subject,w.unit1,w.unit2].filter(Boolean);
    const photosH=w.photos&&w.photos.length?`<div class="wc-photos">${w.photos.map((src,pi)=>`<div class="wc-photo" onclick="openLightbox('${src}')"><img src="${src}" alt="ì‚¬ì§„${pi+1}"></div>`).join('')}</div>`:'';
    return`<div class="weakness-card"><div class="wc-path">${parts.map(p=>`<span class="wc-seg">${escH(p)}</span><span class="wc-sep">â€º</span>`).join('')}<span class="wc-leaf">${escH(w.type)}</span><span class="wc-date">${w.date||''}</span></div><div class="wc-memo">${escH(w.memo||'ë©”ëª¨ ì—†ìŒ')}</div>${photosH}<div style="display:flex;gap:6px;flex-wrap:wrap"><button class="btn btn-ghost btn-sm" onclick="t5OpenEdit(${ri})">ìˆ˜ì •</button><button class="btn btn-danger" onclick="t5Delete(${ri})">ì‚­ì œ</button></div></div>`;
  }).join('');
}
function t5RenderFilters(){const subjects=[...new Set(t5items.map(w=>w.subject).filter(Boolean))];const c=$('t5-filters');if(!subjects.length){c.innerHTML='';return;}c.innerHTML=`<span class="filter-chip ${!t5activeFilter?'active':''}" onclick="t5SetFilter(null)">ì „ì²´</span>`+subjects.map(s=>`<span class="filter-chip ${t5activeFilter===s?'active':''}" onclick="t5SetFilter('${escH(s)}')">${escH(s)}</span>`).join('');}
function t5SetFilter(v){t5activeFilter=v;t5Render();}
function t5Delete(i){if(!confirm('ì´ ì•½ì  ê¸°ë¡ì„ ì‚­ì œí• ê¹Œìš”?'))return;t5items.splice(i,1);t5Save_();t5Render();showToast('ğŸ—‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');}
function t5OpenEdit(i){t5editIdx=i;const w=t5items[i];$('t5e-subject').value=w.subject||'';$('t5e-unit1').value=w.unit1||'';$('t5e-unit2').value=w.unit2||'';$('t5e-type').value=w.type||'';$('t5e-memo').value=w.memo||'';t5editPhotos=[...(w.photos||[])];t5RenderEditPrev();$('t5-edit-modal').classList.add('open');}
function t5CloseModal(){$('t5-edit-modal').classList.remove('open');t5editIdx=null;t5editPhotos=[];}
function t5HandleEditPhotos(input){Array.from(input.files).forEach(f=>{const r=new FileReader();r.onload=e=>{t5editPhotos.push(e.target.result);t5RenderEditPrev();};r.readAsDataURL(f);});input.value='';}
function t5RenderEditPrev(){const c=$('t5e-preview');c.innerHTML=t5editPhotos.map((s,i)=>`<div class="photo-thumb"><img src="${s}" alt="ì‚¬ì§„${i+1}"><button class="remove-btn" onclick="t5editPhotos.splice(${i},1);t5RenderEditPrev()">âœ•</button></div>`).join('');}
function t5SaveEdit(){if(t5editIdx===null)return;const w=t5items[t5editIdx];w.subject=$('t5e-subject').value.trim();w.unit1=$('t5e-unit1').value.trim();w.unit2=$('t5e-unit2').value.trim();w.type=$('t5e-type').value.trim();w.memo=$('t5e-memo').value.trim();w.photos=[...t5editPhotos];t5Save_();t5Render();t5CloseModal();showToast('âœ… ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤');}
document.getElementById('t5-edit-modal').addEventListener('click',function(e){if(e.target===this)t5CloseModal();});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   íƒ­6 - ë™ê¸°í™” & ë°±ì—…
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const T6_CFG='t6-cfg',T6_META='t6-meta';
const SYNC_KEYS=['t1','t2','t3','t4'];
let t6working=false;

function t6Init(){t6LoadCfg();t6RefreshSummary();t6RefreshMeta();}
function t6LoadCfg(){const r=localStorage.getItem(T6_CFG);if(!r)return;const c=JSON.parse(r);if(c.token)$('t6-token').value=c.token;if(c.gistId)$('t6-gist-id').value=c.gistId;t6UpdateStatus();}
function t6SaveConfig(){const token=($('t6-token').value||'').trim(),gistId=($('t6-gist-id').value||'').trim();if(!token){showToast('â— í† í°ì„ ì…ë ¥í•˜ì„¸ìš”');return;}localStorage.setItem(T6_CFG,JSON.stringify({token,gistId}));t6UpdateStatus();showToast('âœ… ì„¤ì • ì €ì¥ë¨');t6Log('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤','ok');}
function t6ClearConfig(){if(!confirm('ì„¤ì •ì„ ì´ˆê¸°í™”í• ê¹Œìš”?'))return;localStorage.removeItem(T6_CFG);$('t6-token').value='';$('t6-gist-id').value='';t6UpdateStatus();showToast('ğŸ—‘ ì„¤ì • ì´ˆê¸°í™”ë¨');}
function t6UpdateStatus(){const token=($('t6-token').value||'').trim(),el=$('t6-config-status'),uc=$('t6-upload-card'),dc=$('t6-download-card');if(token){el.className='config-status ok';el.textContent='âœ… ì„¤ì • ì™„ë£Œ â€” ë™ê¸°í™” ì¤€ë¹„ ì™„ë£Œ';uc.classList.remove('disabled');dc.classList.remove('disabled');}else{el.className='config-status empty';el.textContent='âš ï¸ í† í°ì„ ì…ë ¥í•˜ê³  ì„¤ì • ì €ì¥ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”';uc.classList.add('disabled');dc.classList.add('disabled');}}
function t6ToggleToken(){const i=$('t6-token');i.type=i.type==='password'?'text':'password';}
function t6CopyGistId(){const id=($('t6-gist-id').value||'').trim();if(!id){showToast('â— Gist IDê°€ ì—†ìŠµë‹ˆë‹¤');return;}navigator.clipboard.writeText(id).then(()=>showToast('ğŸ“‹ Gist ID ë³µì‚¬ë¨')).catch(()=>showToast('ì§ì ‘ ì„ íƒí•´ì„œ ë³µì‚¬í•˜ì„¸ìš”'));}

// ë°ì´í„° ìˆ˜ì§‘ (ì‚¬ì§„ ì œì™¸)
function t6Collect(){
  const data={};
  SYNC_KEYS.forEach(k=>{const v=localStorage.getItem(k);if(v)data[k]=JSON.parse(v);});
  const w=localStorage.getItem('t5');
  if(w)data['t5']=JSON.parse(w).map(item=>({...item,photos:[]}));
  data['_at']=new Date().toISOString();data['_v']=2;
  return data;
}

// ë°ì´í„° ì ìš© (ê¸°ì¡´ ì‚¬ì§„ ìœ ì§€)
function t6Apply(data){
  SYNC_KEYS.forEach(k=>{if(data[k]!==undefined)localStorage.setItem(k,JSON.stringify(data[k]));});
  if(data['t5']){const ex=JSON.parse(localStorage.getItem('t5')||'[]'),pm={};ex.forEach(item=>{if(item.id)pm[item.id]=item.photos||[];});const merged=data['t5'].map(item=>({...item,photos:pm[item.id]||[]}));localStorage.setItem('t5',JSON.stringify(merged));}
}

// â˜… ë°±ì—…: JSON íŒŒì¼ì„ ë¡œì»¬ì— ë‹¤ìš´ë¡œë“œ
function t6DoBackup(){
  const data=t6Collect();
  const content=JSON.stringify(data,null,2);
  const blob=new Blob([content],{type:'application/json'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');
  const dateStr=new Date().toISOString().slice(0,10);
  a.href=url;a.download=`tutoring_backup_${dateStr}.json`;
  document.body.appendChild(a);a.click();document.body.removeChild(a);
  URL.revokeObjectURL(url);
  t6Log(`ğŸ’¾ ë°±ì—… íŒŒì¼ ì €ì¥: tutoring_backup_${dateStr}.json`,'ok');
  return content;
}

// ë°±ì—…ë§Œ (Gist ì—†ì´)
function t6BackupOnly(){
  t6DoBackup();
  showToast('ğŸ’¾ ë°±ì—… íŒŒì¼ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
}

// ë°±ì—… íŒŒì¼ì—ì„œ ë³µì›
function t6RestoreFromFile(input){
  const file=input.files[0];
  if(!file)return;
  if(!confirm('ë°±ì—… íŒŒì¼ì—ì„œ ë°ì´í„°ë¥¼ ë³µì›í• ê¹Œìš”?\ní˜„ì¬ ì´ ê¸°ê¸°ì˜ ë°ì´í„°ëŠ” ë®ì–´ì”Œì›Œì§‘ë‹ˆë‹¤.'))return;
  const reader=new FileReader();
  reader.onload=e=>{
    try{
      const data=JSON.parse(e.target.result);
      t6Apply(data);
      const at=data._at?new Date(data._at).toLocaleString('ko-KR'):'ì•Œ ìˆ˜ ì—†ìŒ';
      t6Log(`âœ… ë³µì› ì™„ë£Œ (ë°±ì—… ì‹œê°: ${at})`,'ok');
      showToast('âœ… ë³µì› ì™„ë£Œ! ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤');
      setTimeout(()=>location.reload(),1500);
    }catch(err){
      t6Log('âŒ íŒŒì¼ ì½ê¸° ì‹¤íŒ¨: '+err.message,'err');
      showToast('âŒ íŒŒì¼ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤');
    }
  };
  reader.readAsText(file);
  input.value='';
}

function t6GetCfg(){return JSON.parse(localStorage.getItem(T6_CFG)||'{}');}

async function t6Upload(){
  if(t6working)return;
  const cfg=t6GetCfg();
  if(!cfg.token){showToast('â— ì„¤ì •ì„ ì €ì¥í•˜ì„¸ìš”');return;}
  if(!confirm('ì´ ê¸°ê¸° ë°ì´í„°ë¥¼ GitHub Gistì— ì—…ë¡œë“œí• ê¹Œìš”?\nì—…ë¡œë“œ ì „ì— ë°±ì—… íŒŒì¼ì´ ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.'))return;
  t6working=true;t6SetLoading('upload',true);
  // â˜… ì—…ë¡œë“œ ì „ ìë™ ë°±ì—…
  t6Log('ì—…ë¡œë“œ ì „ ìë™ ë°±ì—… ì¤‘...','info');
  const content=t6DoBackup();
  t6Log(`ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ (${(content.length/1024).toFixed(1)} KB)`,'info');
  try{
    let gistId=cfg.gistId,resp;
    if(gistId){
      t6Log('ê¸°ì¡´ Gist ì—…ë°ì´íŠ¸ ì¤‘...','info');
      resp=await fetch(`https://api.github.com/gists/${gistId}`,{method:'PATCH',headers:{'Authorization':'token '+cfg.token,'Content-Type':'application/json','Accept':'application/vnd.github.v3+json'},body:JSON.stringify({description:'ê³¼ì™¸ ê´€ë¦¬ ë…¸íŠ¸ ë°ì´í„°',files:{'tutoring_data.json':{content}}})});
    }else{
      t6Log('ìƒˆ Gist ìƒì„± ì¤‘...','info');
      resp=await fetch('https://api.github.com/gists',{method:'POST',headers:{'Authorization':'token '+cfg.token,'Content-Type':'application/json','Accept':'application/vnd.github.v3+json'},body:JSON.stringify({description:'ê³¼ì™¸ ê´€ë¦¬ ë…¸íŠ¸ ë°ì´í„°',public:false,files:{'tutoring_data.json':{content}}})});
    }
    if(!resp.ok){const e=await resp.json();throw new Error(e.message||'HTTP '+resp.status);}
    const result=await resp.json();gistId=result.id;
    cfg.gistId=gistId;localStorage.setItem(T6_CFG,JSON.stringify(cfg));$('t6-gist-id').value=gistId;
    localStorage.setItem(T6_META,JSON.stringify({lastSync:new Date().toISOString(),dir:'upload'}));
    t6Log('âœ… ì—…ë¡œë“œ ì™„ë£Œ! Gist ID: '+gistId,'ok');showToast('âœ… ì—…ë¡œë“œ ì™„ë£Œ!');
  }catch(e){t6Log('âŒ ì‹¤íŒ¨: '+e.message,'err');showToast('âŒ ì—…ë¡œë“œ ì‹¤íŒ¨: '+e.message);}
  t6working=false;t6SetLoading('upload',false);t6RefreshMeta();
}

async function t6Download(){
  if(t6working)return;
  const cfg=t6GetCfg();
  if(!cfg.token){showToast('â— ì„¤ì •ì„ ì €ì¥í•˜ì„¸ìš”');return;}
  if(!cfg.gistId){showToast('â— Gist IDê°€ ì—†ìŠµë‹ˆë‹¤. ë…¸íŠ¸ë¶ì—ì„œ ë¨¼ì € ì—…ë¡œë“œí•˜ì„¸ìš”');return;}
  if(!confirm('Gist ë°ì´í„°ë¥¼ ì´ ê¸°ê¸°ì— ì ìš©í• ê¹Œìš”?\nì´ ê¸°ê¸°ì˜ í˜„ì¬ ë°ì´í„°ëŠ” ë®ì–´ì”Œì›Œì§‘ë‹ˆë‹¤.'))return;
  t6working=true;t6SetLoading('download',true);t6Log('ë‹¤ìš´ë¡œë“œ ì‹œì‘...','info');
  try{
    const resp=await fetch(`https://api.github.com/gists/${cfg.gistId}`,{headers:{'Authorization':'token '+cfg.token,'Accept':'application/vnd.github.v3+json'}});
    if(!resp.ok){const e=await resp.json();throw new Error(e.message||'HTTP '+resp.status);}
    const gist=await resp.json(),fc=gist.files['tutoring_data.json']?.content;
    if(!fc)throw new Error('tutoring_data.jsonì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    const data=JSON.parse(fc);
    const at=data._at?new Date(data._at).toLocaleString('ko-KR'):'ì•Œ ìˆ˜ ì—†ìŒ';
    t6Log('ë°ì´í„° ìˆ˜ì‹  (ì €ì¥: '+at+')','info');
    t6Apply(data);
    localStorage.setItem(T6_META,JSON.stringify({lastSync:new Date().toISOString(),dir:'download'}));
    t6Log('âœ… ë‹¤ìš´ë¡œë“œ ì™„ë£Œ! ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤...','ok');showToast('âœ… ë‹¤ìš´ë¡œë“œ ì™„ë£Œ! ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤');
    setTimeout(()=>location.reload(),1500);
  }catch(e){t6Log('âŒ ì‹¤íŒ¨: '+e.message,'err');showToast('âŒ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨: '+e.message);}
  t6working=false;t6SetLoading('download',false);t6RefreshMeta();
}

function t6SetLoading(dir,on){const icon=$(dir==='upload'?'t6-upload-icon':'t6-download-icon');if(on)icon.innerHTML='<div class="spinner"></div>';else icon.textContent=dir==='upload'?'â¬†ï¸':'â¬‡ï¸';}
function t6Log(msg,type='info'){const box=$('t6-log'),line=document.createElement('div');line.className='log-line';const now=new Date().toTimeString().slice(0,8);line.innerHTML=`<span class="log-time">${now}</span><span class="log-msg ${type}">${msg}</span>`;box.appendChild(line);box.scrollTop=box.scrollHeight;}
function t6RefreshMeta(){const r=localStorage.getItem(T6_META),badge=$('t6-sync-badge'),lt=$('t6-last-time');if(!r){badge.className='sync-badge never';badge.textContent='ë¯¸ë™ê¸°í™”';lt.textContent='ë§ˆì§€ë§‰ ë™ê¸°í™”: ì—†ìŒ';return;}const m=JSON.parse(r),d=new Date(m.lastSync),str=d.toLocaleString('ko-KR',{month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'});lt.textContent=`ë§ˆì§€ë§‰ ${m.dir==='upload'?'ì—…ë¡œë“œ':'ë‹¤ìš´ë¡œë“œ'}: ${str}`;badge.className='sync-badge synced';badge.textContent=m.dir==='upload'?'â¬† ì—…ë¡œë“œë¨':'â¬‡ ë‹¤ìš´ë¡œë“œë¨';}
function t6RefreshSummary(){
  const students=JSON.parse(localStorage.getItem('t1')||'[]');
  const l=JSON.parse(localStorage.getItem('t3')||'[]'),m=JSON.parse(localStorage.getItem('t4')||'[]'),w=JSON.parse(localStorage.getItem('t5')||'[]');
  $('t6-sum-students').textContent=Array.isArray(students)?students.length:1;
  $('t6-sum-lessons').textContent=l.length;$('t6-sum-msgs').textContent=m.length;$('t6-sum-weakness').textContent=w.length;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ì´ˆê¸°í™”
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
t1Load(); t2Load(); t3Load(); t4Load(); t5Load(); t6Init(); dashRefresh();
</script>
</body>
</html>
